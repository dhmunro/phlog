<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Rulers and Graph Paper</title>
  <meta name="description"
    content="Why are complex numbers interesting.">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>MathJax = {tex: { inlineMath: [["$", "$"], ["\\(", "\\)"]] }};
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
          id="MathJax-script">
  </script>
  <style>
    div {
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }
    .textcolumn {
      padding-left: 1em;
      padding-right: 1em;
      min-width: 22em;
      max-width: 52em;
      margin: 0 auto;
    }
    .halfwide {
      width: 60%;
      float: right;
    }
    .clickable {
      cursor: pointer;
    }
    .backlit {
      background-color: #d8d8d8;
    }
    svg {
      background-color: #ffffff;
      stroke-linecap: round;
      stroke-linejoin: round;
      width: 100%;
      height: 100%;
    }
    .belowsvg {
      font: italic bold large serif;
      padding-top: 0px;
      margin-top: 0px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    @media only screen and (max-width: 620px) {
      .halfwide {
        width: 100%;
      }
    }
  </style>
</head>
<body>
<div class="textcolumn">
  <h1 style="text-align: center;">Rulers and Graph Paper</h1>
  <h2>Adding and multiplying with rulers</h2>
  <p>A number line is an idealized infinite ruler, a coordinate system
    for the points on the line.  The point associated with the number
    zero is called the origin, and the distance from the origin to the
    point associated with the number one is the unit of the ruler.
    Both origin and unit are arbitrary.  We draw a circle at the
    origin and draw a square at the point corresponding to the number
    one; the thick segment connecting them is one unit long.</p>
  <p>To add two numbers we use two rulers, here blue and orange, with the
    same units but different origins: Drag the origin of the orange
    ruler to the first addend on the blue scale, then drag the gray slider
    to the second addend on the orange scale.  Read the sum as the position
    of the slider on the blue scale.</p>
  <svg xmlns="http://www.w3.org/2000/svg"
       viewBox="-6 -0.5 12 1.0" onload="add1d_interactions(evt)"
       stroke-width="0.03">
    <path fill="none" stroke="#0080ff"
      d="M -5.8,0 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2"/>
    <path id="add1t" fill="none" stroke="#ff8000" transform="translate(0.00,0)"
      d="M -12.8,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2"/>
    <line stroke="black" stroke-width="0.04" x1="-6" y1="0" x2="6" y2="0" />
    <line stroke="#0080ff" stroke-width="0.08" x1="0" y1="0" x2="1" y2="0" />
    <circle fill="#0080ff" stroke="#0080ff"
            cx="0" cy="0" r="0.1" />
    <rect fill="#0080ff" stroke="#0080ff"
          x="0.9" y="-0.1" width="0.2" height="0.2" />
    <g id="add1ug" transform="translate(0.00,0)">
      <line stroke="#ff8000" stroke-width="0.08" x1="0" y1="0" x2="1" y2="0" />
      <circle id="add1uc" fill="#ff8000" stroke="#ff8000"
              cx="0" cy="0" r="0.1" />
      <rect fill="#ff8000" stroke="#ff8000"
            x="0.9" y="-0.1" width="0.2" height="0.2" />
    </g>
    <polygon id="add1s" fill="black" stroke="black" opacity="0.5"
             transform="translate(1.8,0)"
             points="-0.14142,0, 0,-0.14142, 0.14142,0, 0,0.14142"/>
  </svg>
  <p class="belowsvg">
    <span id="add1x" class="" style="color: #0080ff;">0.00</span> +
    <span id="add1y" class="" style="color: #ff8000;">1.80</span> =
    <span id="add1z" class="" style="color: #0080ff;">1.80</span></p>
  <p>Similarly, to multiply two numbers we can use two rulers with the
    same origins but different units: Drag the square marker of the
    orange ruler to the first mulitplicand on the blue scale (which is
    the new unit of the stretched orange ruler), then drag the gray
    slider to the second multiplicand on the orange scale.  Read the
    product as the position of the slider on the blue scale.  Be sure
    to notice what happens when you drag the orange square to the left
    of the common origin.</p>
  <svg xmlns="http://www.w3.org/2000/svg"
       viewBox="-6 -0.5 12 1.0" onload="mul1d_interactions(evt)"
       stroke-width="0.03">
    <path fill="none" stroke="#0080ff"
      d="M -5.8,0 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.2 v .4 m .2,-.4 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2"/>
    <path id="mul1t" fill="none" stroke="#ff8000" stroke-width="0.03"
      transform="scale(1.00,1)"
      d="M -32.8,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2
      m .2,-.4 v .4 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2 m .2,-.2 v .2"/>
    <line stroke="black" x1="-6" y1="0" x2="6" y2="0" />
    <line stroke="#0080ff" stroke-width="0.08" x1="0" y1="0" x2="1" y2="0" />
    <circle fill="#0080ff" stroke="#0080ff"
            cx="0" cy="0" r="0.1" />
    <rect fill="#0080ff" stroke="#0080ff"
          x="0.9" y="-0.1" width="0.2" height="0.2" />
    <line id="mul1ul" stroke="#ff8000" stroke-width="0.08"
          x1="0" y1="0" x2="1.00" y2="0" />
    <circle fill="#ff8000" stroke="#ff8000"
            cx="0" cy="0" r="0.1" />
    <rect id="mul1ur" fill="#ff8000" stroke="#ff8000"
          x="0.90" y="-0.1" width="0.2" height="0.2" />
    <polygon id="mul1s" fill="black" stroke="black" opacity="0.5"
      transform="translate(1.8,0)"
      points="-0.14142,0, 0,-0.14142, 0.14142,0, 0,0.14142"/>
  </svg>
  <p class="belowsvg">
    <span id="mul1x" class="" style="color: #0080ff;">1.00</span> &times;
    <span id="mul1y" class="" style="color: #ff8000;">1.80</span> =
    <span id="mul1z" class="" style="color: #0080ff;">1.8000</span></p>
  <p>Addition of numbers corresponds to displacing the coordinate
    origin.  Multiplication of numbers corresponds to changing the
    coordinate unit.</p>
  <h2>Adding and multiplying with graph paper</h2>
  <p>Graph paper provides a coordinate system for the points in a
    plane.  Our unit on the plane is a square instead of a segment;
    one corner goes at an arbitrary origin point, then we tile the
    remainder of the plane into a grid of our unit squares.  Two
    coordinate numbers are associated with each point of the plane, the
    row and column numbers of the point in our grid.  We can define
    "addition" and "multiplication" for pairs of numbers using the
    same ideas we used for single numbers on the one dimensional
    number line: Addition will be changing the origin with a fixed
    unit square, and multiplication will be changing the unit square
    with a fixed origin.  To play with this idea, we need two
    overlapping sheets of graph paper which initially overlay each
    other.</p>
  <div class="halfwide">
  <svg xmlns="http://www.w3.org/2000/svg" style="padding-left: 0.5em"
       viewBox="-4.1 -4.1 8.2 8.2" onload="add2d_interactions(evt)"
       stroke-width="0.03">
    <defs>
      <marker id="arrow-gray" orient="auto" viewBox="0 -3 6 6"
              refX="6" markerWidth="6" markerHeight="6">
        <polygon fill="#808080" stroke="none" points="0,-3, 6,0, 0,3"/>
      </marker>
      <marker id="arrow-blue" orient="auto" viewBox="0 -3 6 6"
              refX="6" markerWidth="6" markerHeight="6">
        <polygon fill="#0080ff" stroke="none" points="0,-3, 6,0, 0,3"/>
      </marker>
      <marker id="arrow-orange" orient="auto" viewBox="0 -3 6 6"
              refX="6" markerWidth="6" markerHeight="6">
        <polygon fill="#ff8000" stroke="none" points="0,-3, 6,0, 0,3"/>
      </marker>
    </defs>
    <path fill="none" stroke="#0080ff" opacity="0.33"
      d="M -5,-6 v 12
      m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12
      m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12
      M -6,-5 h 12
      m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12
      m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12"/>
    <path id="add2t" fill="none" stroke="#ff8000" opacity="0.33"
      stroke-width="0.03" transform="translate(0.00,0.00)"
      d="M -12,-13 v 26
         m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26
         m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26
         m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26
         m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26
         m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26 m 1,-26 v 26
         M -13,-12 h 26
         m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26
         m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26
         m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26
         m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26
         m -26,1 h 26 m -26,1 h 26 m -26,1 h 26 m -26,1 h 26"/>
    <polygon stroke="#0080ff" fill="none" stroke-width="0.1"
             points="0,0, 1,0, 1,-1, 0,-1" />
    <circle fill="#0080ff" stroke="#0080ff"
            cx="0" cy="0" r="0.125" />
    <rect fill="#0080ff" stroke="#0080ff"
          x="0.9" y="-0.1" width="0.25" height="0.25" />
    <polygon id="add2gg" fill="none" stroke="#808080"
              points="0.0,0.0, 1.8,0.0, 1.8,-0.8, 0.0,-0.8" />
    <polygon id="add2gb" fill="none" stroke="#0080ff"
              points="0.0,0.0, 0.0,0.0, 0.0,0.0, 0.0,0.0" />
    <polygon id="add2go" fill="none" stroke="#ff8000"
              points="0.0,0.0, 1.8,0.0, 1.8,-0.8, 0.0,-0.8" />
    <g id="add2ug" transform="translate(0.00,0)">
      <polygon stroke="#ff8000" fill="none" stroke-width="0.1"
               points="0,0, 1,0, 1,-1, 0,-1"/>
      <circle id="add2uc" fill="#ff8000" stroke="#ff8000"
              cx="0" cy="0" r="0.125" />
      <rect fill="#ff8000" stroke="#ff8000"
            x="0.90" y="-0.1" width="0.25" height="0.25" />
    </g>
    <line id="add2vb" fill="#0080ff" stroke="#0080ff" stroke-width="0.05"
          marker-end="none" x1="0" y1="0" x2="0" y2="0"/>
    <line id="add2vo" fill="#ff8000" stroke="#ff8000" stroke-width="0.05"
          marker-end="none" x1="0" y1="0" x2="0" y2="0"/>
    <line id="add2vg" fill="#808080" stroke="#808080" stroke-width="0.05"
          marker-end="url(#arrow-gray)" x1="0" y1="0" x2="1.8" y2="-0.8"/>
    <circle id="add2ucx" fill="#ff8000" stroke="#ff8000" opacity="0.0"
            transform="translate(0.00,0)" cx="0" cy="0" r="0.125" />
    <polygon id="add2s" fill="black" stroke="black" opacity="0.5"
      transform="translate(1.8,-0.8)"
      points="-0.1768,0, 0,-0.1768, 0.1768,0, 0,0.1768"/>
  </svg>
  <p class="belowsvg">
    (<span id="add2x" class="" style="color: #0080ff;">1.00 + i0.00</span>) +
    (<span id="add2y" class="" style="color: #ff8000;">1.80 + i0.80</span>) =
    <span id="add2z" class="" style="color: #0080ff;">1.80 + i0.80</span></p>
  </div>
  <p>To add two coordinate pairs, we drag the origin of the second
    sheet to the to the point at the first pair; the sum is the
    coordinate pair on the first sheet corresponding to the second
    pair on the displaced sheet.  Adding pairs by shifting the
    coordinate origin therefore amounts to ordinary addition of each
    component of the two pairs.</p>
</div><div class="textcolumn" style="clear: right; margin-top: 0.3em;">
  <div class="halfwide">
  <svg xmlns="http://www.w3.org/2000/svg" style="padding-left: 0.5em"
       viewBox="-4.1 -4.1 8.2 8.2" onload="mul2d_interactions(evt)"
       stroke-width="0.03">
    <path fill="none" stroke="#0080ff" opacity="0.33"
      d="M -5,-6 v 12
      m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12
      m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12 m 1,-12 v 12
      M -6,-5 h 12
      m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12
      m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12 m -12,1 h 12"/>
    <path id="mul2t" fill="none" stroke="#ff8000" opacity="0.33"
      stroke-width="0.03" transform="scale(1.00,1.00)"
      d="M -32,-33 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66 m 1,-66 v 66
         M -33,-32 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66
         m -66,1 h 66 m -66,1 h 66 m -66,1 h 66 m -66,1 h 66"/>
    <polygon stroke="#0080ff" fill="none" stroke-width="0.1"
             points="0,0, 1,0, 1,-1, 0,-1" />
    <circle fill="#0080ff" stroke="#0080ff"
            cx="0" cy="0" r="0.125" />
    <rect fill="#0080ff" stroke="#0080ff"
          x="0.9" y="-0.1" width="0.25" height="0.25" />
    <polygon id="mul2gg" fill="none" stroke="#808080"
              points="0.0,0.0, 1.8,0.0, 1.8,-0.8, 0.0,-0.8" />
    <polygon id="mul2gb" fill="none" stroke="#0080ff"
              points="0.0,0.0, 0.0,0.0, 0.0,0.0, 0.0,0.0" />
    <polygon id="mul2go" fill="none" stroke="#ff8000"
              points="0.0,0.0, 1.8,0.0, 1.8,-0.8, 0.0,-0.8" />
    <polygon id="mul2ul" stroke="#ff8000" fill="none" stroke-width="0.1"
             points="0,0, 1,0, 1,-1, 0,-1"/>
    <circle fill="#ff8000" stroke="#ff8000" cx="0" cy="0" r="0.125" />
    <polygon id="mul2ur" fill="#ff8000" stroke="#ff8000"
             transform="matrix(1.0, 0.0, 0.0, 1.0, 1.0, 0.0)"
             points="-0.125,-0.125, 0.125,-0.125, 0.125,0.125, -0.125,0.125" />
    <line id="mul2vb" fill="#0080ff" stroke="#0080ff" stroke-width="0.05"
          marker-end="url(#arrow-blue)" x1="0" y1="0" x2="1.0" y2="0.0"/>
    <line id="mul2vec" fill="#808080" stroke="#808080" stroke-width="0.05"
          marker-end="url(#arrow-gray)" x1="0" y1="0" x2="1.8" y2="-0.8"/>
    <polygon id="mul2urx" fill="#ff8000" stroke="#ff8000" opacity="0.0"
             transform="matrix(1.0, 0.0, 0.0, 1.0, 1.0, 0.0)"
             points="-0.125,-0.125, 0.125,-0.125, 0.125,0.125, -0.125,0.125" />
    <polygon id="mul2s" fill="black" stroke="black" opacity="0.5"
      transform="translate(1.8,-0.8)"
      points="-0.1768,0, 0,-0.1768, 0.1768,0, 0,0.1768" />
  </svg>
  <p class="belowsvg">
    (<span id="mul2x" class="" style="color: #0080ff;">1.00 + i0.00</span>)
    &times;
    (<span id="mul2y" class="" style="color: #ff8000;">1.80 + i0.80</span>) =
    <span id="mul2z" class="" style="color: #0080ff;">1.8000 + i0.8000</span>
  </p>
  </div>
  <p>Multiplication is far more interesting.  We can scale our unit
    square up and down by fixing its lower left corner (our origin
    point) and dragging its lower right corner to the right or left
    along the line where the vertical coordinate is zero.  For the
    horizontal coordinate, this action exactly reproduces our
    stretching of the unit segment in one dimension.  In order to keep
    our plane unit square, we must simultaneously stretch the vertical
    edge of the square.  Besides just making the squares in our graph
    paper larger or smaller, we can also rotate the paper.  That is,
    the orientation of the graph paper can change as well as its
    scale.  This happens very naturally when we drag the lower right
    corner to an arbitrary point, instead of restricting ourselves to
    dragging it horizontally.  Thus, to multiply two coordinate pairs,
    we fix the origins of the two sheets and drag the lower right
    corner of the unit square to the point of the first pair.  The
    product is the coordinate pair on the first sheet corresponding to
    the second pair on the stretched and rotated second sheet.</p>
  <p>Here is a revolutionary way to think about this two dimensional
    multiplication: Multiplying anything by $(0, 1)$ rotates the point
    about the origin by ninety degrees, so $(0, 1)$ times itself is
    $(-1, 0)$.  Since the line where the second coordinate is zero has
    the same addition and multiplication operations as the ordinary
    one dimensional number line, the square of $(0, 1)$ is $-1$.  The
    standard symbol for the square root of negative one is $i$, so $i$
    has coordinates $(0, 1)$.  Instead of a coordinate pair $(x, y)$
    we write a "complex number" $x + iy$, where $x$ and $y$ are
    ordinary numbers on a number line.  This notation provides a
    simple mnemonic for remembering how to compute a complex (two
    dimensional) product using the ordinary rules of algebra:
    $$(a+ib)(x+iy) = ax + iay + ibx + i^2by = (ax-by) + i(ay+bx)$$
    Notice that the addition and multiplication operations inside the
    parentheses on the rightmost side of this equation are the usual
    operations on ordinary numbers, while the rest are our two
    dimensional operations.</p>
  <p>These algebraic formulas are critical for actually computing
    anything using complex numbers, but the geometrical picture of
    dragging the origin for addition and dragging the point $(1, 0)$,
    which we simply call the complex number $1$, for multiplication
    are what gives meaning to those formulas.  Rotating, scaling, and
    translating things are indispensible for mechanics, and when you do
    them (in two dimensions) you are multiplying or adding complex
    numbers.</p>
</div>
<!--
colors: orangered #ff4500   gold #ffd700
        dodgerblue #1e90ff
        blue: #0080ff  orange: #ff8000
  -->
<script>
  var tracking = null;

  function add_trackers(svg, targets, start, track, stop) {
    // svg = svg element
    // targets = array of elements in svg to listen for mouse down events
    // start(index, coords) --> tracking (or null to abort)
    //   index = index into targets
    //   coords = event coordinates in svg coordinate system
    // track(tracking, coords) --> tracking (or null to abort)
    //   tracking = returned by start
    //   coords = event coordinates in svg coordinate system
    // stop(tracking)
    //   tracking = returned by start

    function svgcoords(evt) {  // return event coordinates
      var CTM = svg.getScreenCTM();
      if (evt.touches) {
        evt = evt.touches[0];
      }
      return {
        x: (evt.clientX - CTM.e) / CTM.a,
        y: (evt.clientY - CTM.f) / CTM.d
      };
    }

    function wrapstart(evt) {
      if (tracking !== null) {
        wrapstop(evt);
      }
      var t = evt.target;
      var index = targets.indexOf(t);
      if (index < 0) {
        return;
      }
      evt.stopPropagation();
      evt.preventDefault();  // make usable for touch events
      tracking = start(index, svgcoords(evt));
    }

    function wraptrack(evt) {
      if (tracking === null) {
        return;
      }
      evt.stopPropagation();
      evt.preventDefault();  // make usable for touch events
      tracking = track(tracking, svgcoords(evt));
    }

    function wrapstop(evt) {
      if (tracking === null) {
        return;
      }
      evt.stopPropagation();
      evt.preventDefault();  // make usable for touch events
      stop(tracking);
      tracking = null;
    }

    svg.addEventListener("mousedown", wrapstart);
    svg.addEventListener("mousemove", wraptrack);
    svg.addEventListener("mouseup", wrapstop);
    svg.addEventListener("mouseleave", wrapstop);
    svg.addEventListener("touchstart", wrapstart);
    svg.addEventListener("touchmove", wraptrack);
    svg.addEventListener("touchend", wrapstop);
    svg.addEventListener("touchcancel", wrapstop);
  }

  function get_element(id) {
    return document.getElementById(id);
  }

  var round = Math.round;
  var abs = Math.abs;
  var sqrt = Math.sqrt;

  function add1d_interactions(evt) {
    var add1d = evt.target;
    var a1handle = ["add1uc", "add1s"].map(get_element);
    var xyz = ["add1x", "add1y", "add1z"].map(get_element);
    var cl_xyz = xyz.map(function(e)
                         {return e.getAttributeNodeNS(null, "class");});
    // xyz[0].textContent = value; (old way xyz[0].innerHTML = value;)
    // textContent not supported by IE8 and lower, but neither is SVG
    var xnow = 0.0;
    var ynow = 1.8;
    var xf_tick = get_element("add1t").getAttributeNodeNS(null, "transform");
    var xf_unit = get_element("add1ug").getAttributeNodeNS(null, "transform");
    var xf_slid = get_element("add1s").getAttributeNodeNS(null, "transform");

    function start(index, coords) {
      cl_xyz[index].value = "backlit";
      return [index, coords.x - (index? ynow : xnow)];
    }

    function track(tracking, coords) {
      var index = tracking[0];
      var x = round(20.*(coords.x - tracking[1])) * 0.05;
      if (x > 5.8 || x < -5.8) {
        x = index? 1.8 : 0.0;
        cl_xyz[index].value = "";
        tracking = null;
      }
      var xform = "translate(" + x + ",0.0)";
      if (index === 0) {
        xf_tick.value = xform;
        xf_unit.value = xform;
        xnow = x;
        xyz[0].textContent = xnow.toFixed(2);
        xyz[1].textContent = (ynow - xnow).toFixed(2);
      } else {
        xf_slid.value = xform;
        ynow = x;
        xyz[1].textContent = (ynow - xnow).toFixed(2);
      }
      xyz[2].textContent = ynow.toFixed(2);
      return tracking;
    }

    function stop(tracking) {
      if (tracking !== null) {
        cl_xyz[tracking[0]].value = "";
      }
      return;
    }

    add_trackers(add1d, a1handle, start, track, stop);
  }

  function mul1d_interactions(evt) {
    var mul1d = evt.target;
    var m1handle = ["mul1ur", "mul1s"].map(get_element);
    var xyz = ["mul1x", "mul1y", "mul1z"].map(get_element);
    var cl_xyz = xyz.map(function(e)
                         {return e.getAttributeNodeNS(null, "class");});
    var xf_tick = get_element("mul1t").getAttributeNodeNS(null, "transform");
    var xf_slid = get_element("mul1s").getAttributeNodeNS(null, "transform");
    var xnow = 1.0;
    var ynow = 1.8;
    var xul = get_element("mul1ul").getAttributeNodeNS(null, "x2");
    var xur = get_element("mul1ur").getAttributeNodeNS(null, "x");
    var twidth = get_element("mul1t").getAttributeNodeNS(null, "stroke-width");

    function start(index, coords) {
      cl_xyz[index].value = "backlit";
      var z = xnow * ynow;
      return [index, coords.x - (index? z : xnow), z];
    }

    function track(tracking, coords) {
      var index = tracking[0];
      var x = coords.x - tracking[1];
      var z = tracking[2];
      if (x > 5.8 || x < -5.8) {
        x = index? 1.8 : 1.0;
        cl_xyz[index].value = "";
        tracking = null;
      }
      if (index === 0) {
        if (abs(x) > 0.05) {
          x = round(20.*x) * 0.05;
        } else {
          x = 0.05;
        }
        xf_tick.value = "scale(" + x + ",1.0)";
        twidth.value = "" + (0.03 / abs(x));
        ynow = round(20.*(z / x)) * 0.05;  // in orange coordinates
        xnow = x;
        xul.value = "" + xnow;
        xur.value = "" + (xnow - 0.1);
        xyz[0].textContent = xnow.toFixed(2);
      } else {
        ynow = round(20.*(x / xnow)) * 0.05;  // in orange coordinates
      }
      xf_slid.value = "translate(" + (xnow * ynow) + ",0.0)";
      xyz[1].textContent = ynow.toFixed(2);
      xyz[2].textContent = (xnow * ynow).toFixed(4);
      return tracking;
    }

    function stop(tracking) {
      if (tracking !== null) {
        cl_xyz[tracking[0]].value = "";
      }
      return;
    }

    add_trackers(mul1d, m1handle, start, track, stop);
  }

  function str_complex(spanel, ndig, xy, xy0) {
    var x = xy[0];
    var y = xy[1];
    if (xy0 !== null) {
      x -= xy0[0];
      y -= xy0[1];
    }
    y = -y;
    var sgn = " + i";
    if (y < 0) {
      y = -y;
      sgn = " &minus; i";
    }
    spanel.innerHTML = x.toFixed(ndig) + sgn + y.toFixed(ndig);
  }

  function setvector(vecs, i, xy, color, xy0) {
    var x = xy[0];
    var y = xy[1];
    vecs[0][i].value = "" + x;
    vecs[1][i].value = "" + y;
    if (xy0 !== null) {
      x -= xy0[0];
      y -= xy0[1];
    }
    if (abs(x) + abs(y) < 0.3) {
      vecs[2][i].value = "none";
    } else {
      vecs[2][i].value = "url(#arrow-" + color + ")";
    }
  }

  function add2d_interactions(evt) {
    var add2d = evt.target;
    var a2handle = ["add2ucx", "add2s"].map(get_element);
    var xyz = ["add2x", "add2y", "add2z"].map(get_element);
    var cl_xyz = xyz.map(function(e)
                         {return e.getAttributeNodeNS(null, "class");});
    // xyz[0].textContent = value; (old way xyz[0].innerHTML = value;)
    // textContent not supported by IE8 and lower, but neither is SVG
    var xnow = [0.0, 0.0];
    var ynow = [1.8, -0.8];
    var xf_tick = get_element("add2t").getAttributeNodeNS(null, "transform");
    var xf_unit = get_element("add2ug").getAttributeNodeNS(null, "transform");
    var xfux = a2handle[0].getAttributeNodeNS(null, "transform");
    var xf_slid = get_element("add2s").getAttributeNodeNS(null, "transform");
    var add2gg = get_element("add2gg").getAttributeNodeNS(null, "points");
    var add2gb = get_element("add2gb").getAttributeNodeNS(null, "points");
    var add2go = get_element("add2go").getAttributeNodeNS(null, "points");
    var v = ["add2vb", "add2vo", "add2vg"].map(get_element);
    vecs = [v.map(function(e) {return e.getAttributeNodeNS(null, "x2");}),
            v.map(function(e) {return e.getAttributeNodeNS(null, "y2");}),
            v.map(function(e)
                  {return e.getAttributeNodeNS(null, "marker-end");})];
    var vox1 = v[1].getAttributeNodeNS(null, "x1");
    var voy1 = v[1].getAttributeNodeNS(null, "y1");

    function start(index, coords) {
      cl_xyz[index].value = "backlit";
      var dx = coords.x - (index? ynow[0] : xnow[0]);
      var dy = coords.y - (index? ynow[1] : xnow[1]);
      return [index, [dx, dy]];
    }

    function track(tracking, coords) {
      var index = tracking[0];
      var dxy = tracking[1];
      var x = round(20.*(coords.x - dxy[0])) * 0.05;
      var y = round(20.*(coords.y - dxy[1])) * 0.05;
      if (x > 3.8 || x < -3.8) {
        cl_xyz[index].value = "";
        index = 0;
        xnow = [0.0, 0.0];
        ynow = [1.8, -0.8];
        x = y = 0.0;
        tracking = null;
      }
      if (y > 3.8 || y < -3.8) {
        cl_xyz[index].value = "";
        index = 0;
        xnow = [0.0, 0.0];
        ynow = [1.8, -0.8];
        x = y = 0.0;
        tracking = null;
      }
      var xform = "translate(" + x + "," + y + ")";
      if (index === 0) {
        xf_tick.value = xform;
        xf_unit.value = xfux.value = xform;
        var p = ynow[0];
        var q = ynow[1];
        add2gb.value = "0,0, " + x + ",0, " + x + "," + y + ", 0," + y;
        add2go.value = x+","+y+", "+p+","+y+", "+p+","+q+", "+x+","+q;
        xnow = [x, y];
        str_complex(xyz[0], 2, xnow, null);
        str_complex(xyz[1], 2, ynow, xnow);
        setvector(vecs, 0, xnow, "blue", null);
        setvector(vecs, 1, ynow, "orange", xnow);
        vox1.value = xnow[0];
        voy1.value = xnow[1];
      }
      if (tracking === null) {
        index = 1;
        x = 1.8;
        y = -0.8;
        xform = "translate(" + x + "," + y + ")";
      }
      if (index !== 0) {
        xf_slid.value = xform;
        var p = xnow[0];
        var q = xnow[1];
        add2gg.value = "0,0, " + x + ",0, " + x + "," + y + ", 0," + y;
        if (tracking === null) {
          add2gb.value = "0,0, " + p + ",0, " + p + "," + q + ", 0," + q;
          add2go.value = p+","+q+", "+x+","+q+", "+x+","+y+", "+p+","+y;
        }
        ynow = [x, y];
        str_complex(xyz[1], 2, ynow, xnow);
        setvector(vecs, 1, ynow, "orange", xnow);
        vox1.value = xnow[0];
        voy1.value = xnow[1];
      }
      str_complex(xyz[2], 2, ynow, null);
      setvector(vecs, 2, ynow, "gray", null);
      return tracking;
    }

    function stop(tracking) {
      if (tracking !== null) {
        cl_xyz[tracking[0]].value = "";
      }
      return;
    }

    add_trackers(add2d, a2handle, start, track, stop);
  }

  function mul2d_interactions(evt) {
    var mul2d = evt.target;
    var m2handle = ["mul2urx", "mul2s"].map(get_element);
    var xyz = ["mul2x", "mul2y", "mul2z"].map(get_element);
    var cl_xyz = xyz.map(function(e)
                         {return e.getAttributeNodeNS(null, "class");});
    var xf_tick = get_element("mul2t").getAttributeNodeNS(null, "transform");
    var xf_slid = m2handle[1].getAttributeNodeNS(null, "transform");
    var xnow = [1.0, 0.0];
    var ynow = [1.8, -0.8];
    var xyul = get_element("mul2ul").getAttributeNodeNS(null, "points");
    var xfur = get_element("mul2ur").getAttributeNodeNS(null, "transform");
    var xfurx = m2handle[0].getAttributeNodeNS(null, "transform");
    var twidth = get_element("mul2t").getAttributeNodeNS(null, "stroke-width");
    var mul2gg = get_element("mul2gg").getAttributeNodeNS(null, "points");
    var mul2gb = get_element("mul2gb").getAttributeNodeNS(null, "points");
    var mul2go = get_element("mul2go").getAttributeNodeNS(null, "points");
    var vec = get_element("mul2vec");
    vec = [[vec.getAttributeNodeNS(null, "x2")],
           [vec.getAttributeNodeNS(null, "y2")],
           [vec.getAttributeNodeNS(null, "marker-end")]];
    var vbx2 = get_element("mul2vb");
    var vby2 = vbx2.getAttributeNodeNS(null, "y2");
    vbx2 = vbx2.getAttributeNodeNS(null, "x2");

    function start(index, coords) {
      cl_xyz[index].value = "backlit";
      var znow = [xnow[0]*ynow[0] - xnow[1]*ynow[1],
                  xnow[0]*ynow[1] + xnow[1]*ynow[0]];
      var dx = coords.x - (index? znow[0] : xnow[0]);
      var dy = coords.y - (index? znow[1] : xnow[1]);
      return [index, [dx, dy], znow];
    }

    function track(tracking, coords) {
      var index = tracking[0];
      var xy = tracking[1];
      var x = coords.x - xy[0];
      var y = coords.y - xy[1];
      var z = tracking[2];
      if (x > 3.8 || x < -3.8) {
        cl_xyz[index].value = "";
        index = 0;
        xnow = [1.0, 0.0];
        ynow = [1.8, -0.8];
        z = ynow;
        x = 1.0;
        y = 0.0;
        tracking = null;
      }
      if (y > 3.8 || y < -3.8) {
        cl_xyz[index].value = "";
        index = 0;
        xnow = [1.0, 0.0];
        ynow = [1.8, -0.8];
        z = ynow;
        x = 1.0;
        y = 0.0;
        tracking = null;
      }
      if (index === 0) {
        if (x*x + y*y < 0.05) {
          x = 0.05;
          y = 0.0;
        } else {
          x = round(20.*x) * 0.05;
          y = round(20.*y) * 0.05;
        }
        var r = x*x + y*y;
        var rx = x / r;
        var ry = -y / r;  // rx + i*ry = 1 / (x + i*y)
        r = sqrt(r);
        xf_tick.value = "matrix("+x+","+y+","+(-y)+","+x+",0.0,0.0)";
        twidth.value = "" + (0.03 / r);
        var zox = [rx*z[0] - ry*z[1], rx*z[1] + ry*z[0]];
        ynow = [round(20.*zox[0]) * 0.05, round(20.*zox[1]) * 0.05];
        xnow = [x, y];
        // orange unit square is (0,0), xnow, xnow+perp, perp
        var perp = [xnow[1], -xnow[0]];  // remember +y is downward
        xyul.value = ("0.0,0.0, " + xnow[0] + "," + xnow[1] + ", " +
                      (xnow[0]+perp[0]) + "," + (xnow[1]+perp[1]) + ", " +
                      perp[0] + "," + perp[1]);
        mul2gb.value = "0,0, " + x+",0, " + x+","+y + ", 0,"+y;
        x /= r;
        y /= r;
        xfur.value = xfurx.value = (
          "matrix(" + x + "," + y + "," + (-y) + "," + x + "," +
            xnow[0] + "," + xnow[1] + ")");
        vbx2.value = xnow[0];
        vby2.value = xnow[1];
        str_complex(xyz[0], 2, xnow, null);
      } else {
        // in mul1d:   ynow = round(20.*(x / xnow)) * 0.05;
        var rr2 = 20. / (xnow[0]*xnow[0] + xnow[1]*xnow[1]);
        ynow = [round(rr2*(x*xnow[0]+y*xnow[1])) * 0.05,
                round(rr2*(y*xnow[0]-x*xnow[1])) * 0.05];
      }
      var znow = [xnow[0]*ynow[0] - xnow[1]*ynow[1],
                  xnow[0]*ynow[1] + xnow[1]*ynow[0]];
      xf_slid.value = "translate(" + znow[0] + "," + znow[1] + ")";
      mul2gg.value = ("0,0, " + znow[0]+",0, " + znow[0]+","+znow[1] +
                      ", 0,"+znow[1]);
      mul2go.value = ("0,0, " + (xnow[0]*ynow[0])+","+(xnow[1]*ynow[0]) +
                      ", " + znow[0]+","+znow[1]+", " +
                      (-xnow[1]*ynow[1])+","+(xnow[0]*ynow[1]));
      setvector(vec, 0, znow, "gray", null);
      str_complex(xyz[1], 2, ynow, null);
      str_complex(xyz[2], 4, znow, null);
      return tracking;
    }

    function stop(tracking) {
      if (tracking !== null) {
        cl_xyz[tracking[0]].value = "";
      }
      return;
    }

    add_trackers(mul2d, m2handle, start, track, stop);
  }
</script>
</body>
</html>
