<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Surveying the Solar System</title>
  <meta name="description"
    content="How to survey the solar system using only naked-eye observations.">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>MathJax = {tex: { inlineMath: [["$", "$"], ["\\(", "\\)"]] }};
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
          id="MathJax-script">
  </script>
  <style>
    /* @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap'); */
    @import url('https://fonts.googleapis.com/css2?family=Merriweather+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap');

    body {
        margin: 0;
        padding: 0;
        font-family: 'Merriweather', serif;
        /* font-family: 'Merriweather Sans', sans-serif; */
    }

    .unselectable {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
    }

    #intro {
        width: 100%;
        height: 100%;
        padding: 7%;
        margin: 0;
        transform: translate(0, 0);
        box-sizing: border-box;
        background: #eeec;
        transition: transform 0.3s;
    }
    #intro ul {
        list-style-type: none;
        font-family: 'Merriweather', serif;
        font-weight: normal;
        font-size: 23px;
        height: 95%;
        padding: 10px;
        margin: 0;
        border: 4px solid darkslategray;
        border-radius: 1em;
        background: #fffb;
    }
    #intro ul li {
        padding: 1ex 0ex;
    }

    #intro .close-x {
        position: absolute;
        top: 10px;
        right: 6px;
    }
    .close-x {
        position: relative;
        width: 40px;
        height: 30px;
        cursor: pointer;
    }
    .close-x::before, .close-x::after {
        content: " ";
        display: block;
        position: absolute;
        left: 0;
        top: 12px;
        height: 6px;
        width: 100%;
        border-radius: 6px;
        background-color: darkslategray;
    }
    .close-x::before {
        transform: rotate(45deg);
    }
    .close-x::after {
        transform: rotate(-45deg);
    }

    .hidden {
        display: none;
    }
    #main-helpicon {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
        position: absolute;
        top: 6px;
        left: 8px;
        z-index: 99;
        background: white;
    }
    .helpicon {
        width: 40px;
        height: 30px;
        cursor: pointer;
    }
    #main-hamburger {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 99;
        background: white;
    }
    #main-hamburger:not(.holding).open {
        background: navajowhite;
    }
    .hamburger-x {
        width: 40px;
        height: 30px;
        position: relative;
        transform: rotate(0deg);
        transition: transform .5s ease-in-out, background .5s ease-in-out;
        cursor: pointer;
    }
    .hamburger-x span {
        display: block;
        position: absolute;
        height: 6px;
        width: 100%;
        background: darkslategray;
        border-radius: 6px;
        left: 0;
        transform: rotate(0deg);
        transition: .25s ease-in-out;
    }
    .hamburger-x span:nth-child(1) {
        top: 0px;
    }
    .hamburger-x span:nth-child(2), .hamburger-x span:nth-child(3) {
        top: 12px;
    }
    .hamburger-x span:nth-child(4) {
        top: 24px;
    }
    .hamburger-x.open span:nth-child(1) {
        top: 12px;
        width: 0%;
        left: 50%;
    }
    .hamburger-x.open span:nth-child(2) {
        transform: rotate(45deg);
    }
    .hamburger-x.open span:nth-child(3) {
        transform: rotate(-45deg);
    }
    .hamburger-x.open span:nth-child(4) {
        top: 12px;
        width: 0%;
        left: 50%;
    }

    #top-div {
        width: 100%;
        display: flex;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    .left-wrapper {
        box-sizing: border-box;
        margin: auto;
        flex: 1 1 100%;
        display: flex;
        overflow: auto;
    }

    .left-panel {
        box-sizing: border-box;
        min-width: 450px;
        max-width: 750px;
        margin: auto;
        position: relative;
        flex: 1 1 0;
        opacity: 1;
        transition: opacity 0.3s;
    }
    .left-panel.faded {
        opacity: 0;
    }

    .right-panel {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        transform: scale(1);
        transition: all 0.3s;
        min-width: 450px;
        max-width: 750px;
        margin: auto;
        position: relative;
        flex: 1 1 0;
    }
    .right-panel.shrunken {
        transform: scale(0);
        min-width: 0px;
        max-width: 0px;
        margin: 0;
    }

    .panel-title {
        box-sizing: border-box;
        text-align: center;
        display: block;
        margin: 0;
        padding: 10px 0 0 0;
        height: 30px;
        font-family: 'Merriweather Sans', sans-serif;
        font-size: 28px;
    }

    .sidebar {
        flex: 1 0 auto;
        box-sizing: border-box;
        background: navajowhite;  /* wheat, moccasin, beige, seashell */
        color: slategray;
        margin: 0 auto;
        padding: 30px 0 0 0;
        font-family: 'Merriweather Sans', sans-serif;
        font-size: 135%;
        white-space: nowrap;
        overflow: hidden;
        width: 0;
        transition: width 0.3s;
    }
    .sidebar.open {
        width: 10em;
        transition: width 0.3s;
    }
    .sidebar ul {
        list-style-type: none;
        padding: 0.25ex 0 0 0;
        margin: 1em;
        border-top: 6px solid darkslategray;
    }
    .sidebar ul li:not(.separator) {
        padding: 0.25ex 0 0.25ex 0;
    }
    .sidebar ul li:not(.current, .separator):hover {
        padding: 0.25ex 0 0.25ex 0;
        background: #fdf8e0;  /* oldlace #fdf5e6 */
        color: black;
        font-style: italic;
        font-weight: bold;
        cursor: pointer;
    }
    .sidebar ul li.current {
        font-style: italic;
        background: #fb0;
        color: black;
    }
    .sidebar ul li.separator {
        width: 100%;
        height: 0.2ex;
        background: darkslategray;
    }
    .sidebar ul li.usage {
        text-align: center;
        font-style: italic;
        background: #fb0;
        color: black;
    }

    #main-overlay {
        box-sizing: border-box;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        background: white;
        opacity: 0.95;
        transition: opacity 0.5s;
    }
    #main-overlay.faded {
        opacity: 0;
        z-index: 20;
    }
    .helper {
        min-width: 400px;
        max-width: 750px;
        margin: 0 auto;
        padding: 0 10px 20px;
        font-size: large;
    }
    .helper h1 {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
        font-family: 'Merriweather Sans', sans-serif;
        font-size: 24pt;
        color: darkslategray;
        text-align: center;
    }
    .helper hr {
        margin: 4px 0;
        height: 3px;
        background: darkslategray;
    }
    .question, .helper h1 span {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
        box-sizing: border-box;
        border: 2px solid black;
        border-radius: 8px;
        margin: 4px 0;
        padding: 2px 5px;
        color: black;
        background: #fdf8e0;
        font-family: 'Merriweather Sans', sans-serif;
        cursor: pointer;
    }
    .helper h1 span {
        margin: 0 8px;
        padding: 0 5px;
    }
    .question:hover {
        background: navajowhite;
        font-style: italic;
        font-weight: bold;
    }
    .answer {
        box-sizing: border-box;
        padding: 0 5px;
        font-family: 'Merriweather', serif;
        overflow: hidden;
        max-height: 0;
    }
    .answer.active {
        max-height: 100%;  /* this does not work quite right */
    }

  </style>
</head>

<body>

  <div id="top-div">
    <div id="main-hamburger" class="hamburger-x hidden"
         onclick="openSidebar()">
      <span></span><span></span><span></span><span></span>
    </div>
    <div id="main-helpicon" class="helpicon hidden" onclick="usageClick(this)">
      <svg xmlns="http://www.w3.org/2000/svg"
           xmlns:xlink="http://www.w3.org/1999/xlink"
           viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="42"
                fill="none" stroke="darkslategray" stroke-width="10" />
        <text x="53" y="80" fill="darkslategray"
              font-family="'Merriweather Sans', sans-serif"
              font-weight="bold" font-size="64"
              text-anchor="middle">?</text>
      </svg>
    </div>
    <div class="left-wrapper">
      <div id="top-clock" class="left-panel unselectable">
        <!-- The intro will be moved into the clock svg in javascript below.
             Because this is the landing page for the whole site, we want
             the text to scale with the changing size of the clock svg.
          -->
        <div id="intro">
          <!-- 20pt font optimal for chrome, 18pt for firefox -->
          <ul>
            <li style="padding: 1ex 0ex;">This &ldquo;planet
              clock&rdquo; shows the positions of the Sun and planets
              as they move through the constellations of the Zodiac
              <a href="https://ssd.jpl.nasa.gov/planets/approx_pos.html">for
                any date</a> between 5000 years ago and 1000 years
                from now.</li>
            <li style="padding: 1ex 0ex;">You can watch the Sun and
              planets move through the stars, just as you can by
              looking at the sky with your own eyes.
            </li>
            <li style="padding: 1ex 0ex;">Do you see evidence that the
              planets orbit the Sun and not the Earth?  That Earth is
              the third planet?  Can you figure out the order of the
              planets from the Sun?  How would you test these
              ideas?</li>
          </ul>
          <div class="close-x" onclick="removeIntro()">
          </div>
        </div>
      </div>
      <div id="first-two-l" class="left-panel unselectable faded hidden">
        <div class="panel-title">Fit Ellipse to Orbit</div>
      </div>
      <div id="third-law-l" class="left-panel unselectable faded hidden">
        <div class="panel-title">Fit Other Orbits</div>
      </div>
      <div id="orbit-view" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Picture Planetary Orbits</div>
      </div>
      <div id="earth-year" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Find Earth Period</div>
      </div>
      <div id="mars-year" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Find Mars Period</div>
      </div>
      <div id="surveyor" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Survey Earth &amp; Mars Orbits</div>
      </div>
      <div id="incline" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Find Mars Inclination</div>
      </div>
      <div id="first-two-r" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Area-Time Relation</div>
      </div>
      <div id="third-law-r" class="right-panel unselectable shrunken hidden">
        <div class="panel-title">Period-Distance Relation</div>
      </div>
    </div>
    <div id="main-sidebar" class="sidebar unselectable">
      <ul>
        <!-- https://datacadamia.com/web/dom/event/on_content_attribute
             has information on what can go in the onclick string.
             The "this" argument means the element for onclick,
             the "event" argument is the event.  However, it's a little
             unclear how universal this is, and there is very little
             information about exactly what can go in the onclick string.
        <li onclick="usageClick(this)" class="usage">Tips &amp; Queries</li>
        <li class="separator"></li>
          -->
        <li onclick="clockClick(this)" class="current"
            data-id="top-clock">Planet Clock</li>
        <li onclick="earthClick(this)" data-id="earth-year">Earth Period</li>
        <li onclick="orbitClick(this)" data-id="orbit-view">Orbit View</li>
        <li onclick="marsClick(this)" data-id="mars-year">Mars Period</li>
        <li onclick="surveyClick(this)" data-id="surveyor">Survey Orbits</li>
        <li onclick="inclineClick(this)" data-id="incline">Mars Inclination</li>
        <li onclick="twoClick(this)" data-id="first-two-r">First Two Laws</li>
        <li onclick="thirdClick(this)" data-id="third-law-r">Third Law</li>
      </ul>
    </div>
  </div>
  <div id="main-overlay" class="faded hidden">
    <div id="top-clock-help" class="helper">
      <h1>Tips &amp; Queries: Planet Clock<span>&gt;</span></h1>
      <div class="question">Why study how the planets move?</div>
      <div class="answer">
        <p>Working out how the planets move triggered the scientific
          revolution that built our modern world.</p>
        <p>Everyone who looks up at night must wonder what they are
          looking at, and what our view tells us about where we are
          standing.  Aside from the occasional comet or nova, the
          constellations we see never change - as if a cartographer
          had painted a gigantic map on the sky...</p>
        <p>With exactly seven exceptions: The Sun, the Moon, and five
          wandering stars - the planets.  (The planets Uranus and
          Neptune are too faint for the unaided human eye to see, as
          are the dwarf planets and asteroids.)  Most people will only
          notice the motion of the Sun, because that gives rise to the
          seasons.  If you live near the sea, you might also notice
          the motion of the Moon, because it affects the tides.  The
          motions of the planets have no effect whatsoever on our
          world.</p>
        <p>While the planets have no physical effect on us, working
          out how they move profoundly changed how we think about the
          world.  It's not the puzzle itself, but the process of
          solving it that proved so important in this case.  Here you
          can follow the crucial first step in understanding what you
          are looking at in the sky.</p>
        <p>This &ldquo;planet clock&rdquo; is a very accurate
          ephemeris, which shows you exactly where the Sun and planets
          are relative to the fixed constellations of stars on any
          given date.  Since those motions are the only changes in the
          sky you can see with your own eyes, you have before you a
          tolerably complete summary of every observation of the sky
          in recorded history prior to 1609, when Galileo invented the
          telescope.  You can go outside on any clear night and check
          what this clock says with your own eyes.</p>
        <p>By an odd coincidence, in 1609 Kepler published his first
          two laws of planetary motion - which were therefore entirely
          based on naked-eye data you can recreate for yourself here.
          In other words, the puzzle of planetary motion and the basic
          structure of our solar system was solved using only the
          information here before you.  Can you do what Kepler
          did?</p>
        <!-- Questions asked and topics discussed 9/1/2022 Quest meeting:
1. Scientific method -
   relation between theory/model-computation-experiment/observation
2. Importance of failure
3. Historical context and importance - Newton and gravity
4. Orbit view and what distinguishes models - attachment to one model
5. Casual versus in-depth exploration - sync audio/captioned run through?
6. Other directions: diameter of Earth (flat Earth), parallax of Moon
   (also Newton)
          -->
      </div>
      <hr/>  <!-- following dummy answer fixes spacing after this hr -->
      <div class="answer"></div>
      <div class="question">How does the &ldquo;planet clock&rdquo;
        chart the sky?</div>
      <div class="answer">
        <ul>
        <li>The Sun follows a great circle around
          the <a href="https://en.wikipedia.org/wiki/Celestial_sphere">
          celestial sphere</a> during the course of a year.  The
          constellations of the zodiac lie around this circle, serving
          as convenient markers you can learn to recognize when you
          look at the night sky.</li>
        <li>The plane of the great circle the Sun moves around (or
          sometimes the circle itself) is called the ecliptic.</li>
        <li>The black outer ring of the &ldquo;planet clock&rdquo;
          represents a ribbon of sky centered on the ecliptic: The
          middle gray circle marked 0° is the ecliptic itself; points
          outside this circle are north of the ecliptic in the sky,
          while points inside the circle are south of the
          ecliptic.</li>
        <li>The ribbon extends 9° north and south, and gray circles
          are drawn 5° north and south of the ecliptic.</li>
        <li>The dashed radial lines show the astronomical boundaries
          of the constellations of the zodiac standardized by the IAU
          in 1928.  Abbreviated constellation names appear between
          these dashed lines, tying the black ring to what you see in
          the sky.
          <ul><li>The boundaries drawn here for Scorpio include the
              constellation Ophiuchus, whose 1928 boundary intersects the
              ecliptic even though it is not one of the ancient
              twelve.</li></ul>
        </li>
        <li>On a 3D globe of the sky, the black ring looks like a
          ribbon or a very short cylinder:
        <div style="min-width: 300px; max-width: 700px; padding: 10px;">
          <img src="planetclock.svg"
               style="width: 70%; display: block; margin: 0 auto;"
               alt="picture of ecliptic coordinate system" />
        </div>
        <ul>
          <li>Dark blue lines show the equinox, solstice, and
            ecliptic polar directions.</li>
          <li>Light blue lines show Earth's polar axis and celestial
            equator.</li>
          <li>Very faint light blue circles show the tropic and arctic
            circles.</li>
          <li>Note that the ecliptic pole lies on the arctic circle.
            The north ecliptic pole is about half way between the
            bright stars Polaris (near Earth's celestial pole) and
            Vega.</li>
        </ul>
        </li>
        <li>The solid radial lines marked every 30° around the
          ecliptic show
          <a href="https://en.wikipedia.org/wiki/Ecliptic_coordinate_system">
            J2000 ecliptic longitude</a>.</li>
        <li>The gray circles mentioned above are J2000 ecliptic
          latitude lines (including the equator, which is ecliptic
          latitude 0.).</li>
        <li>J2000 coordinates are fixed relative to the stars, so the
          planet clock shows how the Sun and planets move relative to
          the fixed stars.  The daily rotation is not shown.</li>
        <li>The gold clock hand shows the longitude of the Sun,
          that is, its position in the zodiac.  A fainter gold hand
          shows the longitude exactly opposite the Sun.</li>
        <li>You can toggle additional hands for the planets by
          clicking a name or symbol in the legend.</li>
        <li>You can also toggle the Moon.  However, the motion of the
          Moon only relates very subtly to the motions of the Sun and
          planets, and has nothing to do with the topics discussed
          here.</li>
        <li>You can see everything depicted on the planet clock with
          your own eyes by looking at the night sky.</li>
        <li>The partial
          exception is the Sun - you also need a good timepiece to
          work out where the Sun is in the sky because you can never
          see the Sun and stars together in the sky!  The sky blue
          sector interrupting the black ring very roughly indicates
          the part of the sky which is too close to the Sun to see any
          stars or planets located there.
          <ul><li>The exact extent of the part of the sky obscured by
              daylight depends on your latitude and the time of
              year.</li>
            <li>Stars in the side of the blue sector labeled "evening"
              set too soon after sunset to be seen; stars in the side
              labeled "morning" do not rise enough before sunrise to
              be seen.</li></ul>
        </li>
        <li>If you set the clock forward or backward by many centuries
          (try the year -3000, 5 millenia ago) you will notice that
          the gray ring labelling the months has rotated.  The months
          (in our Gregorian calendar) are tied to the seasons - for
          example the spring equinox is always close to March 20.  The
          rotation of the month dial is caused by the very slow
          precession of the Earth's spin axis relative to the
          constellations - the precession of the equinoxes.</li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <ol>
          <li>Drag Sun around sky ring to set date.</li>
          <li>Click year button to set year (accurate from -3000 to 3000).</li>
          <li>Press and hold triangles below sky ring to animate.</li>
          <li>Click legend symbol or planet name to toggle radial line.</li>
          <li>Click Show/Hide Moon button to toggle Moon.</li>
        </ol>
      </div>
      <hr/>  <!-- following dummy answer fixes spacing after this hr -->
      <div class="answer"></div>
      <div class="question">Do you see evidence that the
        planets orbit the Sun and not the Earth?</div>
      <div class="answer">
        <ul>
        <li>The motion of the planets is clearly <em>connected to</em>
          the motion of the Sun: Toggle on a planet hand by clicking
          on its name in the legend, then press and hold one of the
          triangle animation buttons on the lower right.</li>
        <li>Mercury and Venus wag back and forth about the Sun, never
          far from it.</li>
        <li>Mars, Jupiter, and Saturn generally move around the zodiac
          in the same direction as the Sun but more slowly.</li>
        <li>Notice that Mars, Jupiter, and Saturn reverse direction
          whenever they are near opposition to the Sun - the light
          gold line opposite the Sun hand of the planet clock.  This
          is called retrograde motion.</li>
        <li>Mercury and Venus also reverse direction as they pass from
          the evening to the morning side (they are moving the same
          direction as the Sun as they move from the morning side to
          the evening side).</li>
        <li>In all cases, the retrograde motion of a planet through
          the zodiac is tied to the position of the Sun.</li>
        </ul>
      </div>
      <div class="question">Do you see evidence that
        Earth is the third planet?</div>
      <div class="answer">
        <ul>
        <li>For Mercury and Venus, you get a strong impression that you
          have an edge-on view of roughly circular orbits around the
          Sun, and the size of those orbits is less than your distance
          from the Sun.
        <ul><li>They spend far less time going from evening to morning
            than from morning to evening, as they would if they were
            moving around the Sun in the same direction as the Sun is
            moving around the zodiac.</li>
          <li>The evening to morning transit is in front of the Sun,
            while the morning to evening transit is behind the Sun.</li>
        </ul></li>
        <li>For Mars, Jupiter, and Saturn, try thinking about
          how Earth would look if you were on Venus:</li>
        <ul><li>The direction to Earth from Venus is exactly 180° from
            the direction you see Venus from Earth, so the path Earth
            follows through Venus's sky is exactly the reverse of the
            path we see Venus follow.</li>
          <li>However, when Venus passes between Earth and Sun,
            Earth appears at opposition from Venus.</li>
          <li>For the same reason, Mars, Jupiter, and Saturn move
            retrograde near opposition - their large orbits take them
            behind you.</li></ul>
        </li>
        <li>Since you can see that the orbits of Mercury and Venus are
          smaller than your distance to the Sun, while the orbits of
          Mars, Jupiter, and Saturn are larger, Earth must be third in
          order from the Sun.</li>
        </ul>
      </div>
      <div class="question">Can you figure out the order
        of the planets from the Sun?</div>
      <div class="answer">
        <ul>
        <li>The farthest Mercury or Venus gets from the Sun is called
          its <em>maximum elongation</em>.</li>
        <li>You can see that Mercury has a smaller maximum elongation
          than Venus, so its orbit must be smaller.</li>
        <li>Earth must come third because when the others are at
          opposition, you are between them and the Sun.</li>
        <li>Mercury also moves faster than Venus and Venus moves faster
          than the Sun (that is, Earth).</li>
        <li>Mars moves around the sky slower than the Sun (Earth),
          Jupiter slower still, and Saturn slowest of all, so if the
          rule that closer orbits are faster holds, then that is their
          order in distance from the Sun.</li>
        <li>Without the faster-is-closer rule, ordering the planets
          beyond Earth by distance is much harder.  You need the
          quantitative surveying techniques you will learn later to
          make much progress in measuring the geometry of the orbits
          of Mars, Jupiter, and Saturn.</li>
        <li>However, laws like faster-is-closer will always play a
          central role in understanding the positions of planets.
          When you try to chart the solar system, spatial geometry is
          important, but unless your chart shows how the positions of
          the planets change it will be useless.</li>
        </ul>
      </div>
      <div class="question">How would you test these ideas?</div>
      <div class="answer">
        <p>You can work through the sections in the sidebar menu on
          the right from top to bottom to learn how Johannes Kepler
          tested the hypothesis that the planets orbit the Sun.</p>
        <p>Kepler's brilliant insight was that if the planets move
          around the Sun in <em>periodic</em> orbits - that is,
          tracing the exact same loop at the exact same rate every
          revolution - then you can use them as a surveyor uses
          landmarks to work out their relative distances (which you
          cannot see directly).  He is best remembered for fitting his
          surveyed orbits to formulate his three laws of planetary
          motion, but astronomers had been fitting orbits to
          observations for millenia.  Using surveying techniques to
          map the planets is the crucial original leap Kepler
          made.</p>
      </div>
    </div>
    <div id="earth-year-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>Earth Period<span>&gt;</span></h1>
      <div class="question">
        What does the plot in the right panel show?</div>
      <div class="answer">
        <ul>
          <li>The plot shows the time in days required for the Sun
            to move to each point around the ecliptic.  It covers
            ten complete revolutions (sidereal years).</li>
          <li>To make this plot you need one measurement of ecliptic
            longitude and the exact time of that observation every
            five days or so, for a total of about 730
            observations.</li>
          <li>The accuracy achieved by Tycho Brahe for this kind of
            naked-eye measurement was about 10 seconds in time and
            1/30 degree in angle, and Kepler required this level of
            accuracy to do his surveying.</li>
        <li>The blue line passes through these data points.</li>
        <li>The first observation is plotted as 0 days and 0 revs.</li>
        <li>The gold circle is at the location of the date currently
          shown on the planet clock, so by running the planet clock
          forward or back you can see which point on the blue line
          corresponds to which observation date.</li>
        <li>Each yellow box shows the data collected in one year.  The
          width of the boxes is always exactly one revolution.  The
          height of the boxes is your current estimate of that
          period.</li>
        <li>Your goal is to measure as accurately as possible the
          number of days required for the Sun to complete one
          revolution.
          <ul><li>Adjust your estimate by dragging the slider on the
              right edge of the panel up or down.</li></ul>
        </li>
        <li>The yellow line is the diagonal of all the boxes (which
          are stacked corner to corner), so you want to adjust your
          period estimate to make the straight yellow line coincide
          with the blue data line as best you can.
          <ul><li>The yellow diagonal line is called the &ldquo;mean
              Sun&rdquo; - a theoretical point in the sky which moves
              along the same path as the Sun but at a constant
              rate.</li></ul>
        </li>
        <li>To be able to make a more accurate estimate, click the
          lower triangle button to zoom in.  This will make ten copies
          of the data, and shift each of the ten copies so a different
          one of the boxes overlays the box in the lower left corner.
          <ul><li>The x-axis now shows only one revolution and the y-axis
              shows only one year.</li>
            <li>Drag the slider up or down to an
              incorrect year estimate to see how the blue lines fail to
              repeat if your period estimate is incorrect.</li>
            <li>Run the planet clock to see how the Sun marker follows
              the blue lines from one year to the next.  After you are
              satisfied you understand this stacked plot of your ten
              years of data, you can again adjust your year estimate
              as accurately as possible.</li></ul>
        </li>
        <li>A more accurate way to present this kind of data is to
          think about the difference between the actual position of
          the Sun (blue line) and the mean Sun (yellow line).  Click
          the zoom in button a second time to see that picture.
          <ul><li>The mean Sun depends on your best estimate of the
              period - you can change it with the slider.</li>
            <li>Although it is the mean Sun line that is changing, at
              this highest zoom level it is the blue true Sun lines
              which move because you are plotting the
              difference.</li></ul>
          </li>
        <li>The deviation from the mean Sun line at the highest zoom
          level clearly shows the Sun does not move at a constant rate
          around the ecliptic, but speeds up and slows down in a
          regular, repeatable way.
          <ul><li>The deviation is about 4 days over the course of the
              year.</li>
            <li>You can refine your period estimate to within about
              0.001 day (with ten years of data) - about a minute and
              a half.</li>
            <li>Notice the precision with which the Sun repeats its
              motion every year.</li></ul>
          </li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <ol>
          <li>Use planet clock controls to set starting date.</li>
          <li>Click Reset button (in planet clock dial) to collect ten
             years of Sun position data.</li>
          <li>Click lower triangle (in upper left corner) to zoom in plot.</li>
          <li>Click upper triangle (in upper left corner) to zoom out plot.</li>
          <li>Drag slider (along right edge) up or down to change your
            estimate of Earth's orbital period.</li>
        </ol>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">
        What feature strikes you most about the motion of the Sun?</div>
      <div class="answer">
        <ul>
        <li>The most striking thing about the motion of the Sun is how
          precisely it repeats every year.  Here you can check that
          the Sun returns to exactly the same place in the zodiac
          every 365.256 days - to within 0.001 day (a minute and a
          half)!</li>
        <li>No natural phenomenon on Earth recurs nearly that
          precisely - in fact, until the last century or two, no human
          contrivances had that kind of precision.</li>
        <li>What is perhaps even more impressive - and important - is
          that this motion is not quite uniform.  The Sun is speeding
          up and slowing down as it moves through the constellations
          in exactly the same pattern over and over again.</li>
        <li>The combination of exact periodicity and non-uniformity
          hints at some great underlying regularity.  Newton finally
          explained this ancient mystery by recognizing the law of
          universal gravity, but that is a story for another place.
          Here you will focus on simply describing this periodic
          motion in as simple, accurate, and general a way as
          possible.</li>
        <li>Since the apparent diameter of the Sun in the sky remains
          constant, at least as far as you can tell using naked-eye
          observations, you know that the distance from the Earth to
          the Sun must change very little, if at all, during the
          course of the year.
          <ul><li>However, remember how nearly straight the blue data
              line appeared on the two lower magnification levels in
              the right panel.  Is it possible that the distance to
              the Sun is changing by a similar tiny amount as it moves
              around the sky?</li></ul>
        </li>
        <li>If the distance to the Sun is changing slightly during the
          year, the precise periodicity of its motion around the sky
          strongly suggests that any distance changes are also
          periodic, repeating exactly every year.
          <ul><li>In other words, periodicty in the motion around the
              sky strongly suggests that the Sun is moving around the
              Earth (or vice versa) along a closed path in space, like
              a train around a fixed track on an unvarying
              schedule.</li></ul>
          </li>
        </ul>
      </div>
      <div class="question">
        What does the periodicity of the Sun suggest about planetary
        motion?</div>
      <div class="answer">
        <p>What do you mean when you say that the planets all move
          around the Sun and that the Earth is the third planet?
          Besides giving a vague description of the geometry of the
          solar system, you must be saying that if you could view the
          solar system from the Sun, the planets would all move around
          the zodiac in a similar manner.  You mean that the planets
          are somehow alike in their motion around the Sun.  And if
          the Earth is just another planet (in this respect), you are
          saying you know one example of whatever this general kind of
          motion may be: You know exactly how the Earth appears to
          move around the zodiac as viewed from the Sun, because it is
          the same as the motion of the Sun you have measured from
          Earth, only rotated 180°.</p>
        <p>Thus, from the striking periodicity of the Sun's motion,
          the Earth pretty certainly moves in a closed path around the
          Sun at a not-quite-uniform but precisely repeating rate.
          And if the motion of the other planets is somehow similar to
          Earth's, surely this must be the general rule: The planets
          all move in periodic closed orbits around the Sun.  Another
          way to think about it is that, when viewed from any planet,
          the Sun will exhibit the same perfectly periodic motion
          around the zodiac that you see from Earth.</p>
        <p>But this periodic closed orbit hypothesis is an idea you
          can test by carefully studying your planetary position data!
          If it is true, then any planet returns to exactly the same
          point on its orbit after exactly one of its periods.  That
          implies a certain relationship between observations made on
          dates spaced by one period in time, and you can check
          whether your observations are, in fact, so related.  Like
          any hypothesis, checking this is not mathematical proof that
          the hypothesis is true, but it is an extremely strong
          argument in its favor.</p>
      </div>
    </div>
    <div id="orbit-view-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>Orbit View<span>&gt;</span></h1>
      <div class="question">
        What does the diagram in the right panel show?</div>
      <div class="answer">
        <ul>
        <li>The diagram shows three different pictures or paradigms for
          the solar system: heliocentric, geocentric, and epicycles.
          <ul><li>In all cases, you are viewing the ecliptic plane
              from a position far from the solar system in the
              direction of the north ecliptic pole.</li>
            <li>The three pictures are indistinguishable, in the sense
              that the relative positions of the Sun and planets are
              exactly the same in all three pictures.  There is no
              observational way to distinguish among them without
              reference to bodies outside the solar system.</li>
            <li>The Sun-Earth and any Earth-planet lines you have
              toggled on in the planet clock are highlighted.  Note
              that these lines in the diagram on the right remain
              exactly parallel to their counterparts in the planet
              clock on the left: These paradigms all model the motions
              you see in the sky perfectly as you move the planet
              clock around.</li>
            <li>None is &ldquo;right&rdquo; or &ldquo;wrong&rdquo; -
              the question is usefulness, not correctness.</li>
          </ul>
        </li>
        <li>The heliocentric picture is the modern accepted model of
          the solar system, as advocated by Copernicus and surveyed
          by Kepler.  The Sun is at the center, and the planets move
          around it in closed orbits.</li>
        <li>The geocentric picture was proposed by Tycho.  It is
          identical to the heliocentric picture, except the Earth is
          translated to remain stationary at the center, forcing the
          Sun to move around it.  All of the closed planetary orbits
          remain centered on the now moving Sun.  The gold orbit of
          the Sun around the Earth is identical to the blue orbit of
          the Earth around the Sun in the heliocentric picture, except
          it is rotated 180°.</li>
        <li>The epicycles picture is a modifed version of the ancient
          Greek solar system described in Ptolemy's Almagest but
          dating from much earlier.  The modification here is to set
          the arbitary scale factors and change the epicycle shapes
          slightly (from circles to ellipses), so that this epicycle
          picture is geometrically identical to the geocentric
          picture.  However, the model retains all of the key
          geometrical features of Greek epicycle models.
          <ul><li>For Mercury, Venus, and the Sun, the epicycles
              picture is identical to the geocentric picture.  The Sun
              serves as the center of these two epicycles.</li>
            <li>For Mars, Jupiter, and Saturn, the planetary orbit
              path has been moved from the Sun to the Earth.  A new
              radial line is drawn from the Earth to a point on this
              Earth-centered planet orbit, and a copy of the gold Sun
              orbit is centered at the end of this radial line.  Each
              planet now moves around a small circle - its epicycle, a
              displaced copy of the Sun's orbit - centered on a larger
              circle centered on the Earth.</li>
            <li>A faint new point and line appear on the planet clock
              for Mars, Jupiter, or Saturn (when you toggle on its
              radial line).  This is the direction from the Earth to
              the imaginary point at the center of the epicycle (the
              gold copy of the Sun's orbit).
          <li>If you run the clock forward, you will see that the
              outer planets wag back and forth around this epicycle
              center point in exactly the same way that Mercury and
              Venus wag back and forth around the Sun: The epicycle
              center moves around the zodiac smoothly; the planet
              slowly overtakes it prograde, then quickly crosses back
              over it retrograde.</li>
            <li>The epicycles paradigm was designed to make the motion
              of the outer planets resemble that of the inner planets
              in this wagging motion.</li></ul>
          </li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <ol>
          <li>Click upper triangle (in upper left corner) to zoom out view.</li>
          <li>Click lower triangle (in upper left corner) to zoom in view.</li>
          <li>Click heliocentric/geocentric/epicycles button to change
            pictures.</li>
        </ol>
        <p>Zoom in all the way to watch the inner planets in the
          heliocentric picture.  Zoom out one step to watch the inner
          planets in the geocentric or epicycles picture.  Zoom out a
          second step to watch Jupiter (in any picture).  Zoom out all
          the way to watch Saturn.</p>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">
        What do you like about the heliocentric picture?</div>
      <div class="answer">
        <p>When you adopt the heliocentric picture, you are likely to
          guess that the motion of the planets as viewed from the Sun
          has the same crucial property as the motion of the Sun as
          viewed from Earth: that every planet, like Earth, travels
          periodically along a closed path around the Sun.  If this
          hypothesis is true, then you can survey the solar system to
          find the shapes of all the orbits and how each planet speeds
          up and slows down as it moves around its orbit.  The
          heliocentric picture strongly suggests a surveying model you
          can test.</p>
        <p>Of course, whatever test you devise will also confirm the
          other two pictures, since they are geometrically equivalent.
          However, by demoting the Earth from its central position and
          supposing it to behave like just another planet, you've
          already suggested that the orbits of the other planets should
          be periodic closed loops around the Sun.  When the Earth was
          different from the other planets, the assumption that their
          orbits around the Sun resemble the Sun's orbit around the
          Earth in this way feels like a separate hypothesis.</p>
        <p>A second reason to believe that the Sun should be at the
          center is that you know it is far, far larger than the Earth
          or any other planet.  The planets always appear as starlike
          points, while you can see the disk of the Sun in the
          sky.</p>
      </div>
      <div class="question">
        What do you like about the geocentric picture?</div>
      <div class="answer">
        <p>You might be attracted to the geocentric picture because it
          makes the relationship between the radial lines you actually
          observe on the planet clock and the radial lines in the map
          of the ecliptic plane really obvious.  Wherever you are, you
          are always at the point from which all your sight lines
          emanate.  Putting the Earth at the center plays into that
          perceptual truth.</p>
        <p>Tycho had an interesting technical reason for believing
          that the Earth is stationary, while the Sun and planets
          orbit it: If the Earth moves around the Sun, then by
          observing the positions of the stars very carefully, you
          should be able to detect slight changes in the shapes of the
          constellations as we view them from different perspectives.
          Despite his best efforts, however, he could not detect any
          such stellar parallaxes.  He calculated that the stars must
          therefore be at least several thousand times farther away
          than the Sun.  He reasoned that this vast difference in
          scale between the distance to the planets and the distance
          to the stars was even less likely than the Earth being
          stationary.  But the universe holds many surprises.</p>
      </div>
      <div class="question">
        What do you like about the epicycles picture?</div>
      <div class="answer">
        <p>The epicycles picture was the backbone of astronomy for
          over two millenia, accepted by nearly all the most brilliant
          ancient Greek and medieval Islamic astronomers.  You see
          here that their model can be adjusted to be equivalent to
          our modern heliocentric picture, so they certainly were not
          completely on the wrong track.  It was a very successful
          descriptive model even in its imperfect forms, and it's hard
          to argue with success.</p>
        <p>The original geometric attraction to the epicycle picture
          is that Mercury and Venus are pretty clearly moving around
          the Sun as the Sun moves around the zodiac.  That is, they
          are moving around a circle whose center is in turn moving
          around us.  This kind of motion is much easier to visualize
          when the radius of the epicycle is less than the radius of
          its center.</p>
        <p>The geocentric picture features epicycle descriptions of
          Mars, Jupiter, and Saturn, but the epicycle radius is larger
          than the radius its center moves around (the Sun, as for
          Mercury and Venus).  You can get exactly the same motion by
          swapping the big circle and the small circle, so that the
          small one - in this case the orbit of the Sun - becomes the
          epicycle, while the large one becomes the path for its
          center.</p>
        <p>Watching the outer planets wag back and forth around their
          ghostly epicycle centers on the planet clock may help you to
          understand what the ancients saw in epicycles.  Remember
          that the Sun is always below the horizon when you can see
          any planet - so in a way it is an imaginary point as
          well.</p>
      </div>
      <div class="question">
        How did the ancient epicycles picture differ from this one?</div>
      <div class="answer">
        <p>The ancient Greeks noticed that you can rescale the center
          point and orbit of any planet, keeping the Earth fixed at
          the center of this scaling operation, without changing any
          directions as observed from Earth:</p>
        <div style="min-width: 300px; max-width: 500px;
                    padding: 10px; margin: 0 auto;">
          <img src="epicycle.svg" style="width: 100%"
               alt="picture of orbit scaling" />
        </div>
        <p>Note that in such a scaled orbit, the center of the
          epicycle is at an imaginary point in empty space that lies
          along the Earth-Sun line.  Thus, in the ancient epicycles
          models, the center of the epicycle was always at an
          imaginary point, not just for outer planet orbits as in the
          modified epicycles picture drawn in the right panel of this
          section.</p>
        <p>Unlike the translations of the heliocentric, geocentric,
          and epicycles paradigms drawn here, you can apply a
          different scaling to the orbit of each individual planet.
          Like the translations, you cannot disprove such a model by
          observations of the directions to the planets, since by
          construction those directions remain fixed.  The question
          was not definitively settled until Galileo observed the
          phases of Venus through his telescope, proving that its
          prograde conjunctions are behind the Sun and its retrograde
          conjunctions in front of the Sun.  By naked eye, there is no
          way to tell.  Since the primary reason anyone wanted to
          independently scale the planetary orbits was the belief that
          nothing could move from in front of the Sun to behind it
          (penetrating its "sphere"), the idea of individually scaled
          orbits died with Galileo.</p>
      </div>
    </div>
    <div id="mars-year-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>Mars Period<span>&gt;</span></h1>
      <div class="question">
        What does the plot in the right panel show?</div>
      <div class="answer">
        <ul>
        <li>You need to use at least one planet as a fixed landmark
          in order to survey the solar system.</li>
        <li>The only way to do that is if the planet returns
          periodically to the same position.  If it does, you need to
          know the period of its orbit around the Sun in order to know
          when it has returned to the place you choose for your
          landmark.</li>
        <li>Mars is by far the best landmark choice, so here you will
          explore how to adapt the technique you used to determine the
          orbital period of Earth to the case of Mars.
          <ul><li>The plot in the right panel here behaves analogously
              to the right panel in the Earth Period section, with all
              the same controls.</li>
            <li>Here, when you click the Reset button on the clock,
              you collect twenty years of virtual position data for
              Mars, with observations spaced ten days apart.  Kepler
              used twenty years of Mars data from Tycho for his
              survey.</li></ul>
        </li>
        <li>The Mars data of time (in days) versus longitude (in revs)
          appears as a series of light red S-curves along the diagonal
          of the plot.
          <ul><li>The kinks in the S-curves are the retrograde parts
              of Mars's orbit, and gaps between them are the times
              when Mars is too close to the Sun to be able to make any
              observations.</li>
            <li>When you move the planet clock in the left panel, a
              faint red dot traces the time-longitude data along the
              plot in the right panel, so you can see which date
              corresponds to each data point.</li></ul>
        </li>
        <li>Unfortunately, these data record the position of Mars on
          the zodiac from our point of view on Earth.  In order to
          determine the period of Mars's orbit around the Sun, you
          need to know where Mars appears as viewed from the Sun, so
          you can judge how long it takes to go around exactly once.</li>
        <li>Fortunately, on each S-curve there is exactly one point
          where you <em>do</em> know where Mars appears when viewed
          from the Sun: When Mars is at opposition, we on Earth are
          seeing it at exactly the same ecliptic longitude as it would
          have as viewed from the Sun.
          <ul><li>These opposition points are marked in dark red on
              the plot.</li>
            <li>Of all the data you collected over that twenty year
              span, only these nine or ten opposition points are of
              any use for making an accurate estimate of the period of
              Mars.</li>
            <li>In practice, the opposition points are interpolated
              between two actual observations.  They are treated here
              as if they were points you actually observed.</li></ul>
        </li>
        <li>The yellow boxes along the diagonal again have a width of
          exactly one revolution, and a height of one estimated Mars
          period, which you can adjust using the slider on the right
          edge.
          <ul><li>The yellow line again has the slope of the diagonal,
              but instead of actually being the diagonal, it is
              shifted to pass through the first opposition point.</li>
            <li>You want to adjust the slope of this yellow line - the
              period of Mars - to pass through all the opposition
              points as nearly as possible.</li></ul>
        </li>
        <li>When you zoom in, the first step once again copies and
          shifts all the year boxes to stack them on top of the first
          box at the lower left.</li>
        <li>Since only the opposition points are of interest, they are
          connected by an arbitrary smooth curve (a natural cubic
          spline here, but other choices work just as well).
          <ul><li>Although in reality each of these points is
              separated by over a full period from the previous one,
              there really is a continuous orbital path of time versus
              ecliptic longitude <em>as viewed from the Sun</em> -
              something like the dark red curve - which passes though
              each of the opposition points.</li>
            <li>Twenty years of data was not an arbitrary choice: In
              twenty years the oppositions progress around the zodiac
              just slightly more than once.</li>
            <li>This gives you a small overlap section in the red
              curve connecting them.</li>
            <li>By adjusting the estimated Mars period until the
              overlapping sections match as well as possible, you can
              get a pretty accurate estimate of Mars's period, within
              perhaps half a day or a bit better.</li></ul>
        </li>
        <li>Unlike the case for Earth's orbit, the red curve that
          constitutes your best guess at how Mars moves around the Sun
          differs quite markedly from the straight yellow line.
          <ul><li>Mars speeds up and slows down as it moves around the
              Sun far more than Earth.</li>
            <li>This exaggerated variation from uniform motion is
              another reason why Mars is the best landmark
              choice.</li></ul>
        </li>
        <li>When you zoom in a second time, the plot again switches to
          show you the difference between the red curve and yellow
          line on the vertical axis.
          <ul><li>You can make your final adjustment here to find the
              period of Mars to within a few hundredths of a day.</li>
            <li>Unlike for the Earth, the overlap sections at this zoom
              level usually will not match very well.</li>
            <li>This is not because the orbit of Mars is less periodic
              than Earth.  It is because your data is much sparser -
              you have only nine or ten points on Mars's orbit, while
              you had 75 on Earth's.</li>
            <li>Remember that the red curve has an arbitrary shape -
              it could be any smooth curve passing through the red
              opposition points.  The actual time-longitude curve
              would match perfectly.</li></ul>
        </li>
        <li>Because of the arbitrariness of the red curve, your
          estimate of Mars's period will be less accurate than your
          estimate of Earth's period.  Once you begin surveying, you
          will be able to tighten up this estimate.  For now it is
          easily good enough to begin surveying.</li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <ol>
          <li>Use planet clock controls to set starting date.</li>
          <li>Click Reset button (in planet clock dial) to collect twenty
             years of Sun position data.</li>
          <li>Click lower triangle (in upper left corner) to zoom in plot.</li>
          <li>Click upper triangle (in upper left corner) to zoom out plot.</li>
          <li>Drag slider (along right edge) up or down to change your
            estimate of Mars's orbital period.</li>
        </ol>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">How could you find the periods
         of the other planets?</div>
      <div class="answer">
        <ul>
        <li>Each planet has its own set of challenges.  With twenty
          years of data, you can use this same opposition technique to
          make a pretty accurate estimate of the period of Jupiter.
          To use it for Saturn, you would need over thirty years of
          data.</li>
        <li>Since they are never at opposition, you can never be sure
          of the direction of Mercury or Venus when viewed from the
          Sun.
          <ul><li>Your best alternative is probably to estimate the
              time of inferior conjunction - the retrograde
              conjunction - as best you can.</li>
            <li>The planet is not visible for the shortest period of
              time near inferior conjunction, so your interpolated
              time of conjunction will be more accurate than for
              superior conjunction.</li>
            <li>To partly compensate for the inaccuracy of the time of
              inferior conjunction compared to opposition, twenty
              (Earth) years of data gives you many more revolutions of
              Mercury or Venus than you had of Mars.</li></ul>
        </li>
        <li>In practice, however, the best approach is to use the
          orbits of Mars and Earth you will generate in your upcoming
          survey to derive Kepler's first two laws.
          <ul><li>These laws reduce all orbits to just a few
              parameters.</li>
            <li>You can then use the position data you actually have
              (as opposed to interpolated inferior conjunctions) to
              find the parameter values which best fit your
              observations.</li>
            <li>You will use this technique in the Third Law
              section.</li></ul>
        </li>
        </ul>
      </div>
    </div>
    <div id="surveyor-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>Survey Orbits<span>&gt;</span></h1>
      <div class="question">
        What does the diagram in the right panel show?</div>
      <div class="answer">
        <ul>
        <li>The diagram is the same map of points in the ecliptic plane
          as in the Orbit View section.
          <ul><li>There, the points on the orbits were provided for
              you by magic.</li>
            <li>Here, you will actually do the work to survey a large
              set of points on the orbits of the Earth and
              Mars.</li></ul>
        </li>
        <li>This work is divided into three steps:
        <ol>
          <li>Select one of the nine or ten oppositions you found in
            the Mars Period section to serve as a reference landmark
            point on Mars's orbit.</li>
          <li>Starting from this reference point, you will step
            forward or backward by multiples of your estimated Mars
            period.  This allows you to survey the positions of
            several points on Earth's orbit.</li>
          <li>Starting from each of these different points on
            Earth's orbit, you will step forward or backward by
            multiples of Earth's period.  This allows you to survey
            several points on Mars's orbit.</li>
        </ol></li>
        <li>Move forward through these steps by clicking the Next
          button, back by clicking the Prev button.
          <ul><li>Unlike the period determination, this procedure
              eventually makes full use of all of your twenty years of
              Mars observations, not just nine or ten opposition
              points.</li></ul>
        </li>
        <li>When you select an oppostion in step 1, the radial line
          from the Sun to Mars at that opposition is highlighted in
          black.  (It is really from the Sun to the projection of Mars
          into the ecliptic plane.)
          <ul><li>You know the direction - that is, ecliptic longitude
              - of this line segment, but you do not know its
              length.</li>
            <li>However, you do not know <em>any</em> distances in the
              ecliptic plane.  Therefore, you are free to use this
              black segment as a reference ruler you will use to
              measure distances in the solar system.</li>
            <li>The actual dimensions of the solar system in
              kilometers were unknown until long after Kepler.</li></ul>
        </li>
        <li>In step 2, you use this reference segment to survey eight
          or nine points on Earth's orbit.
          <ul><li>These are drawn with yellow Earth-Sun lines and red
              Earth-Mars lines.</li>
            <li>As you click the ±M buttons to step your observation
              time forward or back one Mars year at a time, the planet
              clock will automatically move to the time of that
              observation, and the yellow and red lines will be
              highlighted on the right panel.</li>
            <li>The point on Earth's orbit has been placed where it
              must be to make the highlighted yellow and blue lines on
              the right panel exactly match the directions of the
              yellow and red lines on the planet clock.</li>
            <li>This is precisely how surveyors
              triangulate two known landmarks - the Sun and your
              reference opposition point on Mars's orbit in this case
              - to chart their own position.</li>
            <li>Notice that one or two points are missing on this ring
              of points on Earth's orbit.  These points are too close
              to conjunction to be able to see Mars.  You will find
              their positions later when you have other points on
              Mars's orbit.</li></ul>
        </li>
        <li>When you advance to step 3, you will be able to step not
          only by Mars periods, but also by Earth periods.
          <ul><li>The diagram simultaneously steps all of the
              observations you made of Mars at the reference point
              forward or backward by one Earth year.</li>
            <li>Since Mars always moves to the same place after any
              fixed time step, you will be looking at Mars when it is
              at a single new place from eight or nine different
              viewpoints.</li>
            <li>If your hypothesis that Mars is moving periodically
              relative to the Sun is correct, all eight or nine of the
              sight lines on these dates should converge at a single
              point - that new point on Mars's orbit.</li>
            <li>Click the ±E button and see what happens.</li>
            <li>Aha!  Look at that!</li>
            <li>Step back and forth with the ±M buttons to move the
              planet clock to over a half dozen different observation
              dates and check that all those red Mars sight lines
              really do converge at a single point.</li>
            <li>Drag the slider on the right edge away from the true
              Mars period.  The observation sight lines no longer
              converge properly - you need to be able to step exactly
              one Mars period to get fixed surveying landmarks and
              make the scheme work.</li></ul>
        </li>
        <li>As you step forward and back Earth years, you
          slowly lose points on Earth's orbit because they will fall
          outside your twenty year data window.  You also occasionally
          gain a new point as it moves into your twenty year window.
          <ul><li>Completely new points on Earth's orbit are marked by
              a faint yellow Earth-Sun line in addition to the red
              Earth-Mars line.</li>
            <li>These new points are located by triangulation using
              the point where all the sight lines from existing points
              on Earth's orbit converge.</li>
            <li>Hence as you add new points on Mars's orbit you also
              pick up new points on Earth's orbit.</li></ul>
        </li>
        <li>Since the periods of Earth and Mars are incommensurate, you
          could continue this process indefinitely.
          <ul><li>The more periods you step away from your reference
              opposition date, the more the error due to any
              inaccuracy in your Mars or Earth period grows.</li>
            <li>Since the uncertainty in your Mars period is greater,
              this calculator limits you to ten Mars period steps away
              from your reference opposition in either direction.</li>
            <li>This arbitrary limit always produces 21 points around
              Earth's orbit and about 40 points around Mars's
              orbit.</li>
            <li>Because you have collected observations of several
              different points on Mars's orbit from each point on
              Earth's orbit, and you have viewed each point on Mars's
              orbit from several different points on Earth's orbit,
              you have used observations made on a total of about 320
              dates in order to survey these 60 odd orbital
              points.</li>
            <li>The diagram plots all the surveyed points on both
              orbits as faint dots.</li></ul>
        </li>
        </ul>
      </div>
      <div class="question">What do the numbers in the upper
        right corner in the third step mean?</div>
      <div class="answer">
        <ul>
        <li>When you observe a new point on Mars's orbit from several
          different points on Earth's orbit (spaced in time by
          multiples of Mars's period), you add to your chart of
          points by plotting the common intersection of the direction
          of Mars you observed at each of those times, starting from
          the position of the Earth points you previously got by
          triangulating a previous point on Mars's orbit.
          <ul><li>However, those lines will never exactly intersect at
              a common point; in fact, if you use the actual direction
              in 3D - latitude as well as longitude - no two lines
              will exactly intersect at all.  The lines will always be
              skew.</li>
            <li>If the common point of intersection is only
              approximate, how do you compute exactly where to plot it
              on your chart of Mars's orbit?</li></ul>
        </li>
        <li>The modern approach to this kind of problem is called least
          squares fitting.
          <ul><li>A least squares fit is a computationally convenient
              way to define the best compromise point: The lines may
              not all intersect at any point, but there will always be
              a point which lies at the minimum RMS (root mean square)
              distance from all the lines.</li>
            <li>However, in this case, you are measuring a direction -
              angles of longitude and latitude - so you really ought
              to find the point that minimizes the RMS angle by which
              the line from Earth to this point deviates from your
              measured direction.</li>
            <li>The calculator that generates this diagram does just
              that: Each new point on Mars's orbit is placed at the
              position that minimizes the RMS angular deviation from
              all of your measurements of Mars at that point (from
              previously charted points on Earth's orbit).</li></ul>
        </li>
        <li>Since both latitude and longitude measurements are used,
          this gives a position of Mars in 3D, even though this
          diagram only shows the projection of that point into the
          plane of the ecliptic.  The full 3D position will be shown
          in the Mars Inclination section.</li>
        <li>The numbers above your current estimated Mars period are
          two measures of the total angular deviations of all 40 of
          these fitted points on Mars's orbit, using all 320 direction
          measurements:
          <ul><li>The bottom number is the RMS angular deviation of
              all of your measured directions from the direction of
              the charted Mars point from the charted Earth
              point.</li>
            <li>The top number is the largest angular deviation of any
              of the 320 observations from its corresponding Mars
              position on the chart.</li>
            <li>Using these numbers, you can make a final adjustment
              to your estimated period of Mars: Move the slider until
              you minimize one or the other of these two numbers -
              they will both minimize for nearly the same
              period.</li></ul>
        </li>
        <li>After this final period adjustment, you can usually drive
          the maximum angular error down to about 0.02° and the RMS
          angular error to about 0.01°.
          <ul><li>Tycho, the last and greatest naked-eye astronomer in
              history, measured the positions of planets with an
              accuracy of about 0.03° - about 1/15 the disk of the Sun
              or Moon, and Kepler used his data.  (Someone with acute
              vision cannot distinguish two marks separated by less
              than about half that, or half a millimeter viewed at a
              distance of a meter.)</li>
            <li>Notice that the groups of lines converging on every
              point around Mars orbit converge most accurately for a
              single value of the period of Mars.</li></ul>
        </li>
        <li>(Any error in the period of Earth would lead to a similar
          failure of your survey lines to converge.  For simplicity,
          this calculator uses the exact value of 365.25636 days
          rather than the value you found in the Earth Period section.
          As noted, it is much easier to determine the period of Earth
          than the period of any other planet.)</li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <ol>
          <li>Click on opposition to select reference opposition.</li>
          <li>Click Next button at upper right to move to the next step.</li>
          <li>Click ±M buttons at lower right to step Mars periods.</li>
          <li>Click ±E buttons at lower left to step Earth periods.</li>
          <li>Click Prev button at upper left to return to the
            previous step.</li>
          <li>Drag slider (along right edge) up or down to change your
            estimate of Mars's orbital period.</li>
        </ol>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">How confident are you in the
        orbital points you just surveyed?</div>
      <div class="answer">
        <ul>
        <li>You have discovered a very well hidden regularity in twenty
          years of painstakingly measured postions of the Sun and
          Mars.
          <ul><li>The greatest geniuses of astronomy pored over data
              very similar to this for two millenia without finding
              these relationships among the positions.</li>
            <li>The striking geometrical relationships are buried two
              levels deep - you first need to find a set of points on
              Earth's orbit by stepping by Mars years from an
              opposition, and then find a new point on Mars's orbit by
              stepping by an Earth year, and only then do you get to
              see the incredible accuracy with which these several
              sight lines converge at a single point.</li></ul>
        </li>
        <li>On the other hand, these steps are routine for terrestrial
          surveyors.
          <ul><li>The trick that you need to wait a certain fixed
              period of time for your landmarks or viewpoints to
              return to their positions has no real analog in ordinary
              surveying.</li>
            <li>Kepler is the one who first figured out how to put the
              two ideas together.</li></ul>
        </li>
        <li>You cannot doubt that your survey points represent an
          accurate map of the positions of the Sun, Mars, and Earth,
          any more than you can doubt a terrestrial map made by
          surveyors.
          <ul><li>In order to make this map, you had to assume that
              the planets periodically return to the same positions,
              each after its own fixed period.</li>
            <li>You then adjusted the periods precisely in order to
              make your surveying techiniques self-consistent.  Is
              this not circular reasoning?</li>
            <li>Yes, but by adjusting only one number (two if you
              count the period of Earth), you were able to exactly fit
              over 320 independent observations of the directions of
              the Sun and Mars.</li>
            <li>Therefore, it is very hard to doubt that the
              hypothesis of periodic orbits is correct, in addition to
              the geometry of your survey points.</li></ul>
        </li>
        <li>Furthermore, you can repeat this survey for any twenty
          year data set you please throughout the ages, or more easily
          using a different opposition in the same twenty year window
          for the starting reference point.  The specific points you
          get around the orbits will be different, but the convergence
          of the sight lines on all the different days will be just as
          accurate.</li>
        </ul>
      </div>
      <div class="question">Have you proven Earth and Mars repeat
        closed orbits around the Sun?</div>
      <div class="answer">
        <p>You have proven that Earth and Mars move <em>as if</em>
          they followed repeating closed orbits around the Sun.  Of
          course, we now routinely measure the tiny discrepancies in
          the orbits of the planets from this rule.  Though the rule
          may not be exact, nevertheless it is very, very
          accurate.</p>
        <p>Would the astonishing consistency of Kepler's surveying
          technique have convinced ancient Greek astronomers that the
          planets orbited the Sun rather than moving along scaled
          orbits whose centers merely aligned with the direction of
          the Sun?  They may well have acknowledged only the
          periodicity of the motion and clung to their scaled orbits.
          At the same time, they would certainly have pounced on
          Kepler's surveyed orbital shapes and recognized them as the
          true shapes of their deferents and epicycles.</p>
      </div>
      <div class="question">Do you think the other planets repeat
        closed orbits around the Sun?</div>
      <div class="answer">
        <p>Your first order of business is to check that the other
          planets do indeed repeat closed orbits.  Are you the kind of
          person who hopes that the answer is yes?  Or no?  Is your
          work done if the answer is yes?</p>
      </div>
    </div>
    <div id="incline-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>Mars Inclination<span>&gt;</span></h1>
      <div class="question">
        What does the diagram in the right panel show?</div>
      <div class="answer">
        <ul>
        <li>Initially, the right panel shows the same chart of the
          orbits of Mars and Earth as the third step of the Survey
          Orbits section.  However, the points you charted on Mars's
          orbit are now plotted in 3D, as you can see by dragging the
          sliders on the bottom and right edges.
          <ul><li>You can see that your surveyed points all lie in a
              single plane containing the Sun, but tilted at a small
              angle away from the ecliptic.</li>
            <li>Because this orbital inclination of Mars is so small,
              you should magnify the z-coordinates by clicking the 10×
              button so you can clearly see the tilt.</li>
            <li>Be sure to click on the point on Mars's orbit where
              the red sight lines converge to turn them off as you
              familiarize yourself with this diagram.</li></ul>
        </li>
        <li>The faint blue line through the Sun is the intersection of
          the best fit plane to your Mars survey points with the
          ecliptic plane, which is called the line of nodes.
          <ul><li>The ecliptic longitude of this line of nodes
              (specifically the ascending node) is the number at the
              top right of the diagram.</li>
            <li>The angle between this best fit plane and the ecliptic
              plane, the orbital inclination of Mars, is the number
              under the ascending node longitude.</li>
            <li>Click the Reset button at the lower left to return to
              the map of the ecliptic plane.  Now drag the bottom
              slider until the blue node line is vertical (you can use
              the stationary tick mark at the top of the diagram to
              align it exactly).</li>
            <li>Drag the right slider all the way to the top
              to get the view along the line of nodes, exactly edge on
              to both the ecliptic and the plane of Mars's orbit.</li>
            <li>Go back to 1× z-magnification to see how small the
              tilt really is.</li></ul>
        </li>
        <li>The ring of faint red dots are the projections of your
          dark red surveyed points into the ecliptic plane.  Viewed
          from Earth, these points have the same ecliptic longitude as
          Mars, but zero ecliptic latitude.</li>
        <li>You can click on any of the dark red points to toggle on or
          off red sight lines for all of the observations you made of
          Mars when it was at that position through your twenty years
          of data.
          <ul><li>The corresponding blue points on Earth's orbit will
              highlight.</li>
            <li>When you view any set of these sight lines from
              different perspectives using the sliders, you can see
              that they all converge to a single point in 3D, not just
              in the plane of the ecliptic.</li></ul>
        </li>
        <li>Finally, as a curiosity, if you jump to the year -3000 and
          survey the Earth and Mars orbits then, the Mars Inclination
          section will show you something very interesting:
          <ul><li>In addition to the plane of Mars's orbit being
              inclined a couple of degrees, the plane of Earth's orbit
              is also inclined a fraction of a degree.</li>
            <li>This is because the J2000 coordinate system adopted
              here puts zero ecliptic latitude in the plane of the
              Earth's orbit in the year 2000, and the Earth's orbital
              plane really does change ever so slowly relative to the
              fixed stars.</li>
            <li>This is not to be confused with the much quicker (but
              still slow) precession of the equinoxes that shifts the
              calendar - unlike equinoctial precession it has nothing
              to do with Earth's spin axis.</li></ul>
        </li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <ol>
          <li>Drag bottom slider to rotate ecliptic plane around Sun.</li>
          <li>Drag right edge slider to rotate view out of ecliptic plane.</li>
          <li>Click one of the magnify z buttons at upper left to select z
            magnification.</li>
          <li>Click any red point on Mars orbit to toggle on or off
            sight lines from Earth orbit points.</li>
          <li>Click Home button at lower left to restore original
            orientation.</li>
        </ol>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">What features are most remarkable about
        your survey points?</div>
      <div class="answer">
        <p>The fact that all the Earth-Mars sight lines emanating from
          your surveyed positions of Earth at the dates you found by
          stepping multiples of Mars years all converge at a single
          point in three dimensions is very striking.  Kepler's survey
          technique works in three dimensions, as it must to be
          successful.</p>
        <p>As if all these convergences were not remarkable enough,
          you should also reflect on the fact that the survey points
          all lie exactly in a single plane containing the Sun.  You
          did not assume this - the only thing you assumed to make
          your survey was that the orbits of Earth and Mars were
          periodic.  You already knew that Earth's orbit was confined
          to a plane containing the Sun, because that is how you
          defined the plane of the ecliptic.  But you now know that
          not only is Mars's orbit as periodic as Earth's, but that it
          too is confined to a plane containing the Sun.</p>
        <p>It seems as if Mars, and probably the other planets,
          completely ignore one another - only the Sun seems to exert
          any influence over the motion of the planets.  Heliocentrism
          is not about what body lies at the the center so much as
          what body dominates the dynamics.  The answer is apparently
          that every body except the Sun is negligible.</p>
      </div>
    </div>
    <div id="first-two-r-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>First Two Laws<span>&gt;</span></h1>
      <div class="question">
        What does the diagram in the left panel show?</div>
      <div class="answer">
        <ul>
          <li>The points in the ring are the ones you found in the
            Survey Orbits section, plotted in the plane of the orbit.
            In the case of Mars, this is tilted about 2° from the
            J2000 ecliptic plane you have used for orbit plots until
            now.</li>
          <li>Drag the three round buttons around to adjust the
            perihelion (point nearest the Sun), aphelion (point
            farthest from Sun), and the line of apses (radial line
            through the Sun connecting perihelion and aphelion).</li>
          <li>The numbers at the bottom left show the perihelion and
            aphelion of your current fit.  The numbers at the bottom
            right are the three conventional orbital parameters:
            The <em>a</em> is the semi-major axis (average of
            perihelion and aphelion).  The <em>e</em> is eccentricity
            (displacement of center from Sun as a fraction
            of <em>a</em>, equal to the difference between perihelion
            and aphelion divided by their sum).  The <em>angle</em> is
            the counterclockwise angle of perihelion from the
            x-axis.</li>
          <li>Your goal is to adjust the three orbital parameters to
            fit your survey points as closely as possible.  One
            systematic procedure is:
            <ol>
              <li>If all points lie outside your current orbit fit,
                drag the <em>perihelion</em> button outward until your fit
                just begins to touch points on the orbit.  Otherwise,
                drag the <em>aphelion</em> button inward (this will
                change perihelion too once they become equal) until
                all points just barely lie outside it.</li>
              <li>In either case, drag the <em>angle</em> button
                around to align the perihelion with the points which
                are just touching your fit.</li>
              <li>Drag the <em>aphelion</em> button outward until your
                fit just touches the points nearest aphelion.</li>
              <li>Alternate among the three round buttons, moving them
                to minimize the error number in the upper left
                corner.</li>
            </ol>
          </li>
          <li>The error number in the upper left corner is the RMS
            (root mean square) distance of your orbit fit from your
            surveyed points.  The units are the same as for the
            perihelion and aphelion numbers at the lower left, namely
            AU (astronomical units, the <em>a</em> value for
            Earth).</li>
          <li>Click the Ellipse/Circle button to fit an eccentric
            circle (simply a circle whose center is displaced from the
            Sun) instead of an ellipse with one focus at the Sun.</li>
          <li>Click the Mars/Earth button to fit Earth's orbit instead
            of Mars's orbit.</li>
          <li>Click the Coarse/Vernier button when you want to make
            fine adjustments to your orbital fit parameters.  This
            does two things: First, you have to move your mouse 20
            times farther to change the parameter by a given amount.
            Second, a set of "ghost" points become visible, which are
            plotted at a distance from your orbit fit that is 20 times
            the distance of the actual solid survey points.  If you
            can get all the ghost points to coincide with the actual
            points you have a perfect fit.</li>
          <li>Click the Auto button if you get frustrated trying to
            make very small adjustments even on Vernier.  You may be
            able to get a slightly better fit after clicking Auto, but
            Auto will get you almost all the way to the minimum error
            fit.</li>
        </ul>
      </div>
      <div class="question">
        What does the plot in the right panel show?</div>
      <div class="answer">
        <ul>
          <li>In the left panel, you have parametrized the shape of
            the orbits of Mars and Earth - Kepler's first law.  In the
            right panel, you will characterize how the planet speeds
            up and slows down as it moves around the shape you have
            fit - Kepler's second law.</li>
          <li>The easiest way to describe the position of the planet
            on its orbit is to specify its angle around the Sun from
            some standard point, usually taken to be its perihelion
            point.</li>
          <li>You saw in the Earth Period section that this angle
            changes with time at an almost, but not quite, uniform
            rate.  After you have fit Earth's orbit in the left panel,
            note the direction of the line of apses you have set.
            Return to the Earth Period section and zoom in twice, then
            drag the Sun marker on the clock around to the steepest
            downward point on the sinusoidal curve - it will be in
            early January (if you are within a few hundred years of
            the present).  Notice that the angle of the Sun hand on
            the clock matches the perihelion angle you set in your fit
            in this section!  This means the Sun is moving around
            fastest at perihelion and slowest at aphelion.</li>
          <li>Drag the triangle button on the left panel around to
            highlight the area enclosed by the line from the Sun to
            the perihelion point, your orbit fit, and the line from
            the curent point on your orbit back to the Sun.</li>
          <li>This will show a white dot on the graph in the right
            panel, which shows you the area of the highlighted area
            in the left panel (as a fraction of the total area of
            the elliptical or circular orbit).</li>
          <li>Since the radius is smaller near perihelion, a given
            change in angle there produces a smaller change in area
            than elsewhere.  Kepler noticed that meant if the area,
            instead of angle, were changing at a constant rate, the
            point would move faster near perihelion and slower near
            aphelion, as you have seen it does.</li>
          <li>Therefore, instead of time as a function of angle, the
            plot in the right panel shows time as a function of
            area.  The white line is a straight line going from
            zero days at area zero to one period (of Mars or Earth)
            at at area one.</li>
          <li>Each orbital point is plotted at the fit area at the
            same angle as the surveyed point in the left panel, and
            the time of those observations modulo one period, shifted
            in time so that the reference opposition you chose in the
            Survey Orbits section lies exactly on the white line.</li>
          <li>Click the zoom in button to plot the difference between
            the survey point times and the white line instead of the
            times themselves.  You can click zoom in a second time
            for an even higher magnification of the vertical
            axis.</li>
          <li>At the first zoom level, play around with the fit
            adjustment buttons in the left panel to see how they
            affect the area-time relationship.</li>
          <li>Recall that the standard ruler in your orbit survey was
            the distance from the Sun to Mars at your reference
            opposition.  However, there is no reason you need to call
            this distance 1.0 unit.  The standard choice is to call
            1.0 unit Earth's <em>a</em> value, which is called the
            astronomical unit, or AU.  To accomplish this, your
            reference distance has been given a numerical value equal
            to the ephemeris Sun-Mars distance at the time of your
            reference opposition.  If that had not been done, you
            would have simply adjusted your units so your
            fitted <em>a</em> value for Earth's orbit was exactly 1.0
            unit.</li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <p>In the left panel:</p>
        <ol>
          <li>Drag round button nearest the Sun around the Sun to
             change perihelion angle of fit.</li>
          <li>Drag round button nearest the orbit on the side with two
            round buttons radially to change the perihelion distance
            of the fit.</li>
          <li>Drag round button opposite the two round buttons
            radially to change the aphelion distance of the fit.</li>
          <li>Click Ellipse/Circle button to fit either an ellipse with
            one focus at the Sun or an eccentric circle.</li>
          <li>Click Mars/Earth button to fit either the points you
            surveyed on Mars's or earth's orbit.</li>
          <li>Click Coarse/Vernier button to change the sensitivity of
            all the drag buttons.</li>
          <li>Click Auto button to set fit parameters to ephemeris
            values.</li>
          <li>Drag triangle button around Sun to show area used by the
            Area-Time relation plot.</li>
        </ol>
        <p>In the right panel:</p>
        <ol>
          <li>Click on triangular buttons in the upper left corner
            to zoom the plot out or in.</li>
        </ol>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">
        Are you convinced that orbits are ellipses with the Sun at one
        focus?</div>
      <div class="answer">
        <ul>
          <li>An ellipse with the Sun at one focus certainly describes
            the surveyed orbit points for both Mars and the Earth
            extremely precisely - within about 0.0003 AU.</li>
          <li>The ancient guess for orbit shapes was an eccentric
            circle.  For the case of Earth's orbit, you have seen that
            the difference between an eccentric circle and an ellipse
            with the Sun at one focus is completely negligible.  By
            naked eye observations, it is impossible to see the
            difference - the two models have the same shape.</li>
          <li>As you see here, even for Mars it is very difficult to
            see the difference between an ellipse and an eccentric
            circle.  The difference between the major and minor axes
            of the best fit ellipse is about one part in 230.  You can
            see it easily only with the 20 times magnified ghost
            points in Vernier mode.  (Toggle Ellipse/Circle in Vernier
            mode after Auto.)</li>
          <li>For Mars, the best fit eccentric circle has RMS error
            of about 0.0023 AU, about seven or eight times larger than
            the RMS error of the best fit ellipse.</li>
          <li>Thus for Mars, an ellipse is clearly a somewhat better
            fit than an eccentric circle.  However, you need to survey
            the position of Mars to within a couple of thousandths of
            its distance to the Sun in order to be able to make that
            judgement.</li>
          <li>Kepler's first law therefore rests on the very slight
            deviations of Mars's orbit from an eccentric circle.
            Until you can verify it with a more eccentric orbit, it is
            a tentative conclusion.</li>
          <li>Mercury's orbit deviates from an eccentric circle by
            about 2&percnt;, largest of all the planets.  Perhaps the
            first really obviously elliptic orbit was Halley's comet,
            discovered about 100 years after Kepler published his
            first and second laws.  (Kepler saw this comet in 1607,
            but did not realize it was orbiting according to his brand
            new laws.)</li>
        </ul>
      </div>
      <div class="question">
        Are you convinced that orbits sweep out equal areas in equal
        times?</div>
      <div class="answer">
        <ul>
          <li>You must have been struck by the accuracy with which the
            area-time survey points lie along the straight line when
            you adjust your orbital shape model to be near best
            fit.</li>
          <li>At best fit, the deviations from a perfectly straight
            line are of order hundredths of a day for Mars as well as
            Earth, out of hundreds of days.  In order words, the law
            that the radius from the Sun to a planet sweeps out equal
            areas in equal times in correct to better than a part in
            ten thousand.  This is at least as good as the accuracy of
            your survey, or of the fit to an ellipse.</li>
          <li>Note the effects of moving your model parameters away
            from the best fit orbital parameters, or switching from
            an ellipse fit to an eccentric circle fit.</li>
          <li>Kepler's second law that planets sweep out equal areas
            in equal times is extremely convincing, much more so than
            his first law.</li>
          <li>For both laws, you can very confidently assert that the
            motions of Mars and Earth are <em>consistent</em> with
            Kepler's laws to very high accuracy.  (Measuring something
            with an accuracy of one part in ten thousand is like
            measuring a one meter distance to within a tenth of a
            millimeter.)</li>
        </ul>
      </div>
      <div class="question">
        How can you test these laws for planets other than Mars and
        Earth?</div>
      <div class="answer">
        <ul>
          <li>In the case of Jupiter, using twenty years of data you
            could survey its orbit using the same techniques you used
            for Mars, then directly fit its orbit and check the equal
            area law as you did for Mars.  Saturn would require about
            thirty years of data, and the survey method you used for
            Mars does not work for Mercury and Venus, since they have
            no oppositions.</li>
          <li>The best way to test laws like these is to <em>assume</em>
            them to be true, and work out the consequences.  That
            strategy was a spectacular success in the case of the law
            that the motion of planets is periodic with respect to
            the Sun, as you found when you assumed it to survey the
            orbits of Earth and Mars.</li>
          <li>If you assume Kepler's first two laws are true, the
            motion of each planet can be described by only six
            numbers: The ecliptic longitude of its ascending node and
            its inclination (which together determine its orbital
            plane), its semi-major axis, eccentricity, and angle of
            perihelion (which determine the shape and orientation of
            its ellipse), and its period.  (A seventh number is its
            position at some initial time, which we can take as
            given.)</li>
          <li>In the next section, you will find these six orbital
            parameters by trial and error, fitting the observed planet
            positions in the sky.</li>
        </ul>
      </div>
    </div>
    <div id="third-law-r-help" class="helper hidden">
      <h1>Tips &amp; Queries:
        <span>&lt;</span>Third Law</h1>
      <div class="question">
        What does the diagram in the left panel show?</div>
      <div class="answer">
        <ul>
          <li>One at a time, select a planet (by clicking on its name
            in the legend) to trace its path around the sky for a few
            years - one year for Mercury, two for Venus and Mars,
            three for Jupiter, and five for Saturn.  The starting date
            is the same as you used in your orbit survey, or the
            current date in the Planet Clock section if you haven't
            done the orbit survey.</li>
          <li>The ten dots on each orbit are simulated observations,
            roughly equally spaced in date over the time span shown
            above the planet legend.  None of these observations is
            near conjunction (when observations are impossible), so
            there are some gaps in dates.</li>
          <li>The solid curve is the path predicted by a model in
            which the planet (and earth) follow an elliptical orbit
            with the Sun at one focus, sweeping out equal areas in
            equal times.  (That is, according to Kepler's first two
            laws.)</li>
          <li>The six orbital parameters for the planet appear above
            the slider.  Click on a parameter name and use the slider
            in the middle to adjust its value in order to change the
            orbit ellipse and period.</li>
          <li>The solid model curve will change slightly as you change
            the orbital parameters.  In order to make those changes
            more easily visible, a ghost point will appear near each
            of the ten observation points.  These ghost points are 20
            times farther from the model curve than the corresponding
            true observation point, so you can more easily see that
            the obseravtion points do not lie exactly on the model
            curve.</li>
          <li>The error number above the orbit parameters is the
            maximum distance in degrees on the sky among the ten
            observations points from its predicted position along the
            model curve on the corresponding date.  Recall that
            Tycho's observations are accurate to about 0.03°
            - the best you can do by naked eye.</li>
          <li>In addition to the six parameters listed, the model
            curve has exactly the ecliptic longitude measured on the
            first observation date.  (This sets the initial position
            of the planet on its ellipse.)</li>
          <li>The initial parameter values match the actual orbit over
            the observation interval as closely as possible (or nearly
            so).  As you are adjusting parameters, you can reset all
            parameters to these initial values by clicking on the
            highlighted planet name in the legend below.</li>
        </ul>
      </div>
      <div class="question">
        What does the plot in the right panel show?</div>
      <div class="answer">
        <ul>
          <li>The graph in the right panel shows the relationship
            between orbital period $T$ and the semi-major axis of the
            orbit $a$.  Kepler's third law is that the ratio of $a^3$
            to $T^2$ is the same for every planet.  If you always
            measure $a$ in astronomical units (AU) and time in Earth
            years (yr), this ratio is exactly 1.0.  (Note that these
            are sidereal years of 365.25636 days, not the tropical
            years of our Gregorian calendar or of Earth seasons.)</li>
          <li>The vertical position of the bar above each planet
            shows the ratio according to the scale at the left.
            The numerical value of the ratio is printed below the
            planet name.</li>
          <li>To show how accurately the power of $a$ must be exactly
            $3$ (assuming the power of $T$ is exactly $2$), adjust the
            power using the slider on the right edge.</li>
          <li>To show how changes in model period or semi-major axis
            affect the ratio, adjust those parameters in the left
            parameter.</li>
        </ul>
      </div>
      <div class="question">How do the controls work?</div>
      <div class="answer">
        <p>In the left panel:</p>
        <ol>
          <li>Click on a planet name in legend to display the model for
            that planet.  Click on the highlighted planet name to
            reset all the model parameters to their initial values.</li>
          <li>Click on a parameter name above to connect that parameter
            value to the slider in the middle.</li>
          <li>Use the slider in the middle to adjust the selected
            parameter value.</li>
        </ol>
        <p>In the right panel:</p>
        <ol>
          <li>Use slider on the right edge to adjust power $p$ of $a$
            in the displayed ratio $a^p/T^2.$ (This is not really an
            adjustable parameter: $p=3$ is the correct value.)</li>
        </ol>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">Are you convinced of Kepler's cube-square
        law?</div>
      <div class="answer">
        <ul>
          <li>For Mercury, Venus, and Mars, you see that $T^2=a^3$ to
            better than one part in 10,000 - a very convincing
            result.</li>
          <li>For Jupiter and Saturn, the ratio can be off by a part or
            two in 1000, depending on what time interval you choose to
            look at.  This is still easily accurate enough to be a
            useful way to estimate period or orbit size if you know
            only one.</li>
          <li>The orbit fits you are using to check the cube-square
            law here depend on the assumption that the orbits are
            ellipses with the Sun at one focus and that the planet
            sweeps out equal areas in equal time as it moves around.
            That is, Kepler's laws are somehow interconnected.</li>
          <li>At least in the case of Jupiter and Saturn, you see
            hints that $a^3$ is not precisely proportional to $T^2$.
            In other words, although these laws of planetary motion
            are very accurate, they may not be quite exact.</li>
        </ul>
      </div>
      <div class="question">How do Kepler's laws change the way you
        survey orbits?</div>
      <div class="answer">
        <ul>
          <li>Kepler's laws profoundly change the way you survey an
            orbit in the solar system.</li>
          <li>Using only terrestrial surveying techniques (plus the
            period stepping trick), you had to make multiple
            observations to find each individual point on Earth's or
            Mars's orbit.  Tracing a whole orbit required hundreds of
            observations.</li>
          <li>Using Kepler's laws, you can get similar quality orbital
            shapes from only a handful (ten here) of observations.</li>
          <li>This compression comes from the fact that a complete
            description of the orbit requires only six numbers (seven
            if you include the ecliptic longitude at the initial
            time).  Generally only a few measurements pin down all six
            numbers, enabling you to compute points on the orbit very
            distant from any of your observations.</li>
          <li>After Kepler, using his complete orbital surveying
            technique became unnecessary, except as an infrequent and
            independent check.  Parameter fitting similar to what you
            have done in this section remains the standard orbital
            surveying technique.</li>
          <li>Once you have established the cube-square law, the
            number of parameters you need to fit drops by one more -
            you no longer need to fit both period and semi-major
            axis.</li>
        </ul>
      </div>
      <hr/>
      <div class="answer"></div>  <!-- do not remove dummy answer -->
      <div class="question">Why study how the planets move?</div>
      <div class="answer">
        <p>The epicycles of ancient Greek astronomy, like Kepler's
          laws, reduce planetary orbits to only a handful of
          parameters.  What they lack is the geometrical basis Kepler
          provided using his survey technique: The Greek epicycles
          were derived solely by a fitting process little different
          from what you just did in the Third Law section.  Kepler, on
          the other hand, fit his ellipse and equal area laws to the
          points he had surveyed on the orbits of Earth and Mars.</p>
        <p>While this was a great leap for astronomy, other thinkers
          would have taken little notice.  After all, the motion of
          the planets has no consequences for or relation to more
          down-to-earth problems.  Or does it?</p>
        <p>In 1687, at the end of the same century that began with
          Kepler's laws, Isaac Newton published his three laws of
          motion.  Newton's laws lay out our modern understanding of
          the relationship between forces and motion, and provide a
          general framework for studying how things move.</p>
        <p>When Newton applied his laws of motion to the planets, he
          realized that Kepler's laws are equivalent to the statement
          that the planets all accelerate directly toward the Sun at a
          rate inversely proportional to the square of their distance
          from it.  Newton knew that the four Galilean moons of
          Jupiter also obey Kepler's laws, differing from the planets
          only in the constant of proportionality between acceleration
          and the inverse square of distance.  When he compared the
          acceleration of our Moon to the acceleration of gravity here
          on Earth, Newton made perhaps the single greatest scientific
          discovery of all time, his law of universal gravitation:
          Gravity is a property of all matter, which not only holds us
          to the surface of the Earth, but also holds the planets in
          orbit around the Sun.</p>
        <p>The influence of Newton's work as a trigger for the
          scientific and industrial revolution cannot be overstated.
          And that excitement, in large measure, was caused by the
          neat way Newton explained Kepler's planetary motion laws -
          most importantly, by connecting them to the familiar force
          of gravity on Earth.  And Kepler's laws are based on
          surveyor's geometry and the hypothesis of periodic orbits
          around the Sun - the beginning of the story of modern
          science.</p>
      </div>
    </div>
  </div>

<!-- Load d3 library.  Later should grab only pieces used.
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.4.4/d3.min.js"></script>
-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.4.4/d3.js"></script>
<script src="./ephemeris.js"></script>
<script src="./planetclock.js"></script>
<script>

  const clock = new PlanetClock(d3.select("#top-clock"));
  clock.goToDay(dayOfDate(new Date()));
  clock.hasMoonButton(true);
  clock.disabled = true;
  let introCover = clock.svg.append("foreignObject")
      .attr("xmlns", "http://www.w3.org/1999/xhtml")
      .attr("width", 620).attr("height", 580)
      .attr("x", -310).attr("y", -290);
  introCover.append(() => d3.select("#intro").node());
  const eyear = new EarthYear(d3.select("#earth-year"), clock);
  const orbits = new OrbitView(d3.select("#orbit-view"), clock);
  const myear = new MarsYear(d3.select("#mars-year"), clock);
  const surveyor = new SurveyOrbits(d3.select("#surveyor"), clock, myear, eyear);
  const incline = new Inclination(d3.select("#incline"), clock, surveyor);
  const laws2 = new TwoLaws(d3.select("#first-two-l"),
                            d3.select("#first-two-r"), incline);
  const law3 = new ThirdLaw(d3.select("#third-law-l"),
                            d3.select("#third-law-r"), incline);
  const slaves = {"top-clock": null, "earth-year": eyear, "orbit-view": orbits,
                  "mars-year": myear, "surveyor": surveyor, "incline": incline,
                  "first-two-r": laws2, "third-law-r": law3};

  const hamburger = document.querySelector("#main-hamburger");
  const helpicon = document.querySelector("#main-helpicon");
  const sidebar = document.querySelector("#main-sidebar");
  const overlay = document.querySelector("#main-overlay");
  function openSidebar() {
    const hamList = hamburger.classList;
    const barList = sidebar.classList;
    if (hamList.contains("holding")) {
      // Usage Overlay active - take overlay down but keep sidebar collapsed.
      hamList.remove("holding", "open");
      const overList = overlay.classList;
      overList.add("faded");
      d3.timeout(() => { overList.add("hidden"); resetHelper(); }, 500);
    } else {
      hamList.toggle("open");
      barList.toggle("open");
    }
  }

  let activeAnswer;
  function toggleAnswer() {
    const answer = this.nextElementSibling;
    if (activeAnswer) activeAnswer.classList.remove("active");
    if (answer == activeAnswer) {
      activeAnswer = undefined;
    } else {
      answer.classList.add("active");
      activeAnswer = answer;
    }
  }
  document.querySelectorAll(".question").forEach(
    e => { e.onclick = toggleAnswer; });

  const helpers = Object.keys(slaves).map(s => "#" + s + "-help");
  let helperDiv = helpers[0];
  function pageTips(di) {
    for (let i=0 ; i<helpers.length ; i+=1) {
      let helpList = document.querySelector(helpers[i]).classList
      if (!helpList.contains("hidden")) {
        helpList.add("hidden");
        helperDiv = helpers[i+di];
        document.querySelector(helperDiv).classList.remove("hidden");
        break;
      }
    }
  }
  function prevTips() {
    return pageTips(-1);
  }
  function nextTips() {
    return pageTips(1);
  }
  document.querySelectorAll(".helper h1 span").forEach(
    e => {
      e.onclick = (e.innerText == "<")? prevTips : nextTips;
    });
  function resetHelper() {
    if (currentSlave == null) {
      helperDiv = helpers[0];
      document.querySelector(helperDiv).classList.remove("hidden");
    } else {
      document.querySelector(helpers[0]).classList.add("hidden");
    }
    for (let i=1 ; i<helpers.length ; i+=1) {
      const panel = document.querySelector(helpers[i].slice(0, -5));
      if (panel.classList.contains("hidden")) {
        document.querySelector(helpers[i]).classList.add("hidden");
      } else {
        helperDiv = helpers[i];
        document.querySelector(helperDiv).classList.remove("hidden");
      }
    }
  }
  function showHelperScroll(on) {
    document.querySelectorAll(".helper h1 span").forEach(
      e => {
        if (on) {
          e.classList.remove("hidden");
        } else {
          e.classList.add("hidden");
        }
      });
  }

  function removeIntro() {
    const intro = d3.select("#intro");
    intro.style("transform", "translate(750px, -375px) scale(0.1)");
    hamburger.classList.remove("hidden");
    helpicon.classList.remove("hidden");
    d3.timeout(
      () => {
        introCover.style("display", "none");
        clock.disabled = false;
      }, 310);
  }

  function restoreIntro() {
    hamburger.classList.add("hidden");
    helpicon.classList.add("hidden");
    const intro = d3.select("#intro");
    introCover.style("display", null);
    d3.timeout(() => intro.style("transform", "translate(0, 0)"), 10);
    d3.timeout(
      () => {
        clock.disabled = true;
      }, 310);
  }

  let currentElem = document.querySelector(".sidebar ul li.current");
  const clockElem = currentElem;
  let currentSlave = null;

  function makeCurrent(elem) {
    if (elem == currentElem) return true;
    hamburger.classList.remove("open");
    sidebar.classList.remove("open");
    if (currentElem) currentElem.classList.remove("current");
    elem.classList.add("current");
    ["mercury", "venus", "jupiter", "saturn"].forEach(
      p => clock.setHandVisibility(p, false));
    const oldDiv = currentElem.dataset.id;
    const newDiv = elem.dataset.id;
    document.querySelector(helperDiv).classList.add("hidden");
    document.querySelector("#"+oldDiv+"-help").classList.add("hidden");
    document.querySelector("#"+newDiv+"-help").classList.remove("hidden");
    const oldDivL = oldDiv.endsWith("-r")? oldDiv.replace("-r", "-l")
          : "top-clock";
    if (oldDiv != "top-clock") {
      const classes = document.querySelector("#"+oldDiv).classList;
      classes.add("shrunken");
      d3.timeout(() => classes.add("hidden"), 300);
    }
    if (currentSlave != null) {
      currentSlave.activate(false);
    }
    currentSlave = slaves[newDiv];
    const newDivL = newDiv.endsWith("-r")? newDiv.replace("-r", "-l")
          : "top-clock";
    if (newDiv != "top-clock") {
      clock.hasMoonButton(false);
      if (newDiv != "earth-year") clock.setHandVisibility("mars", true);
      currentSlave.activate(true);
      const classes = document.querySelector("#"+newDiv).classList;
      classes.remove("hidden");
      d3.timeout(() => classes.remove("shrunken"), 10);
    } else {
      clock.removeElapsed();
      clock.hasMoonButton(true);
    }
    if (newDivL != oldDivL) {
      const oldList = document.querySelector("#"+oldDivL).classList;
      const newList = document.querySelector("#"+newDivL).classList;
      oldList.add("faded");  // triggers 0.3s transition
      d3.timeout(() => {  // wait for fade, then fade new div in
        oldList.add("hidden");
        newList.remove("hidden", "faded");
      }, 300);
    }
    currentElem = elem;
    return false;
  }

  function usageClick(elem) {
    if (hamburger.classList.contains("holding")) {
      // Usage Overlay active - take overlay down but keep sidebar collapsed.
      hamburger.classList.remove("holding", "open");
      const overList = overlay.classList;
      overList.add("faded");
      d3.timeout(() => { overList.add("hidden"); resetHelper(); }, 500);
    } else {
      hamburger.classList.add("holding", "open");
      sidebar.classList.remove("open");
      overlay.classList.remove("hidden");
      d3.timeout(() => overlay.classList.remove("faded"), 10);
    }
  }

  function clockClick(elem) {
    if (makeCurrent(elem)) {
      hamburger.classList.remove("open");
      sidebar.classList.remove("open");
      restoreIntro();
      return;
    }
  }

  function earthClick(elem) {
    if (makeCurrent(elem)) return;
  }

  function orbitClick(elem) {
    if (makeCurrent(elem)) return;
  }

  function marsClick(elem) {
    if (makeCurrent(elem)) return;
  }

  function surveyClick(elem) {
    if (makeCurrent(elem)) return;
  }

  function inclineClick(elem) {
    if (makeCurrent(elem)) return;
  }

  function twoClick(elem) {
    if (makeCurrent(elem)) return;
  }

  function thirdClick(elem) {
    if (makeCurrent(elem)) return;
  }

  // Interpret URL query parameters
  // helpDebug=yes     (helper scroll buttons)
  // tab=orb-view  (intro, earth-year, orb-view, ... main select id)
  // day=8114      (clock.elapsed0 JD minus J2000 day number)
  // eyear=365.25636  (earthYear period value, otherwise unused)
  // myear=686.979  (marsYear.yearEstimate value)
  // oppo=0        (surveyor.iOppo opposition index)
  let urlQueries = location.search.replace("\?", "");
  if (urlQueries) {
    urlQueries = Object.fromEntries(urlQueries.split("&")
                                    .map(q => q.split("=")));
  } else {
    urlQueries = {}
  }
  showHelperScroll(urlQueries.helpDebug == "yes");
  if (urlQueries.eyear && !isNaN(urlQueries.eyear)) {
    let year = parseFloat(urlQueries.eyear);
    if (year < 350) year = 350;
    else if (year > 380) year = 380;
    earthYear.changeYearEstimate(year);
  }
  if (urlQueries.day && !isNaN(urlQueries.day)) {
    let day = parseFloat(urlQueries.day);
    clock.goToDay(day);
    clock.elapsed0 = day;
    eyear.elapsedUpdate(true);
    myear.elapsedUpdate(true);
    if (urlQueries.myear && !isNaN(urlQueries.myear)) {
      let year = parseFloat(urlQueries.myear);
      if (year < 650) year = 650;
      else if (year > 730) year = 730;
      myear.changeYearEstimate(year);
    } else {
      myear.changeYearEstimate(686.97973);
    }
    if (!urlQueries.eyear) {
      eyear.changeYearEstimate(365.25636);
    }
    surveyor.notReady();
    if (urlQueries.oppo && !isNaN(urlQueries.oppo)
        && surveyor.oppositionsFound) {
      let iOppo = parseInt(urlQueries.oppo);
      if (iOppo >= 0 && iOppo < surveyor.oppositionsFound.length) {
        surveyor.selector(undefined, [undefined, iOppo]);
      }
    } else {
      surveyor.selector(undefined, [undefined, 0]);
    }
    surveyor.findEarth();
    surveyor.findMars();
    incline.activate(true);
    incline.activate(false);
  }
  if (urlQueries.tab &&
      ["intro", "earth-year", "orbit-view", "mars-year", "surveyor",
       "incline", "first-two-r", "third-law-r"].indexOf(urlQueries.tab)) {
    if (urlQueries.tab != "intro" || urlQueries.helpDebug == "yes")
      removeIntro();
    document.querySelectorAll("#main-sidebar ul li").forEach(
      e => {
        if (e.dataset && e.dataset.id == urlQueries.tab) e.click();
      });
  }
  if (urlQueries.helpDebug && urlQueries.helpDebug == "yes") {
    openSidebar();
    document.querySelector("#main-sidebar ul li.usage").click();
  }

  /* https://stackoverflow.com/a/68146412  how to create and download csv data
   * data = [[row1col1, row1col2, ...], [row2col1, row2col2, ...], ...]
   */
  function arrayToCsv(data) {
    return data.map(
      row => row
        .map(String)  // convert every value to String
        .map(v => v.replaceAll('"', '""'))  // escape double quotes
        .map(v => `"${v}"`)  // quote it
        .join(',')  // comma-separated
    ).join('\r\n');  // rows starting on new lines
  }

  function downloadBlob(content, filename, contentType) {
    // Create a blob holding the content
    let blob = new Blob([content], { type: contentType });
    let pom = document.createElement('a');  // Create a link to download it
    pom.setAttribute("href", URL.createObjectURL(blob));
    pom.setAttribute("download", filename);
    pom.click();
  }

  // No dialog unless browser set to ask for download confirmation.
  function downloadAsCsv(data, filename="data.csv") {
    downloadBlob(arrayToCsv(data), filename, "text/csv;charset=utf-8;");
  }

</script>

</body>
</html>
